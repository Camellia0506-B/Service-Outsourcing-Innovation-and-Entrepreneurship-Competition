{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.every.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar core = require('@vueuse/core');\nvar lodashUnified = require('lodash-unified');\nvar index$1 = require('../../icon/index.js');\nvar iconsVue = require('@element-plus/icons-vue');\nvar menuBar = require('./utils/menu-bar.js');\nvar menuCollapseTransition = require('./menu-collapse-transition.js');\nvar subMenu = require('./sub-menu.js');\nvar useMenuCssVar = require('./use-menu-css-var.js');\nvar index$2 = require('../../../directives/click-outside/index.js');\nvar runtime = require('../../../utils/vue/props/runtime.js');\nvar typescript = require('../../../utils/typescript.js');\nvar icon = require('../../../utils/vue/icon.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar vnode = require('../../../utils/vue/vnode.js');\nvar shared = require('@vue/shared');\nconst menuProps = runtime.buildProps({\n  mode: {\n    type: String,\n    values: [\"horizontal\", \"vertical\"],\n    default: \"vertical\"\n  },\n  defaultActive: {\n    type: String,\n    default: \"\"\n  },\n  defaultOpeneds: {\n    type: runtime.definePropType(Array),\n    default: () => typescript.mutable([])\n  },\n  uniqueOpened: Boolean,\n  router: Boolean,\n  menuTrigger: {\n    type: String,\n    values: [\"hover\", \"click\"],\n    default: \"hover\"\n  },\n  collapse: Boolean,\n  backgroundColor: String,\n  textColor: String,\n  activeTextColor: String,\n  closeOnClickOutside: Boolean,\n  collapseTransition: {\n    type: Boolean,\n    default: true\n  },\n  ellipsis: {\n    type: Boolean,\n    default: true\n  },\n  popperOffset: {\n    type: Number,\n    default: 6\n  },\n  ellipsisIcon: {\n    type: icon.iconPropType,\n    default: () => iconsVue.More\n  },\n  popperEffect: {\n    type: runtime.definePropType(String),\n    default: \"dark\"\n  },\n  popperClass: String,\n  showTimeout: {\n    type: Number,\n    default: 300\n  },\n  hideTimeout: {\n    type: Number,\n    default: 300\n  },\n  persistent: {\n    type: Boolean,\n    default: true\n  }\n});\nconst checkIndexPath = indexPath => shared.isArray(indexPath) && indexPath.every(path => shared.isString(path));\nconst menuEmits = {\n  close: (index, indexPath) => shared.isString(index) && checkIndexPath(indexPath),\n  open: (index, indexPath) => shared.isString(index) && checkIndexPath(indexPath),\n  select: (index, indexPath, item, routerResult) => shared.isString(index) && checkIndexPath(indexPath) && shared.isObject(item) && (routerResult === void 0 || routerResult instanceof Promise)\n};\nvar Menu = vue.defineComponent({\n  name: \"ElMenu\",\n  props: menuProps,\n  emits: menuEmits,\n  setup(props, {\n    emit,\n    slots,\n    expose\n  }) {\n    const instance = vue.getCurrentInstance();\n    const router = instance.appContext.config.globalProperties.$router;\n    const menu = vue.ref();\n    const nsMenu = index.useNamespace(\"menu\");\n    const nsSubMenu = index.useNamespace(\"sub-menu\");\n    const sliceIndex = vue.ref(-1);\n    const openedMenus = vue.ref(props.defaultOpeneds && !props.collapse ? props.defaultOpeneds.slice(0) : []);\n    const activeIndex = vue.ref(props.defaultActive);\n    const items = vue.ref({});\n    const subMenus = vue.ref({});\n    const isMenuPopup = vue.computed(() => props.mode === \"horizontal\" || props.mode === \"vertical\" && props.collapse);\n    const initMenu = () => {\n      const activeItem = activeIndex.value && items.value[activeIndex.value];\n      if (!activeItem || props.mode === \"horizontal\" || props.collapse) return;\n      const indexPath = activeItem.indexPath;\n      indexPath.forEach(index => {\n        const subMenu = subMenus.value[index];\n        subMenu && openMenu(index, subMenu.indexPath);\n      });\n    };\n    const openMenu = (index, indexPath) => {\n      if (openedMenus.value.includes(index)) return;\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter(index2 => indexPath.includes(index2));\n      }\n      openedMenus.value.push(index);\n      emit(\"open\", index, indexPath);\n    };\n    const close = index => {\n      const i = openedMenus.value.indexOf(index);\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1);\n      }\n    };\n    const closeMenu = (index, indexPath) => {\n      close(index);\n      emit(\"close\", index, indexPath);\n    };\n    const handleSubMenuClick = ({\n      index,\n      indexPath\n    }) => {\n      const isOpened = openedMenus.value.includes(index);\n      isOpened ? closeMenu(index, indexPath) : openMenu(index, indexPath);\n    };\n    const handleMenuItemClick = menuItem => {\n      if (props.mode === \"horizontal\" || props.collapse) {\n        openedMenus.value = [];\n      }\n      const {\n        index,\n        indexPath\n      } = menuItem;\n      if (lodashUnified.isNil(index) || lodashUnified.isNil(indexPath)) return;\n      if (props.router && router) {\n        const route = menuItem.route || index;\n        const routerResult = router.push(route).then(res => {\n          if (!res) activeIndex.value = index;\n          return res;\n        });\n        emit(\"select\", index, indexPath, {\n          index,\n          indexPath,\n          route\n        }, routerResult);\n      } else {\n        activeIndex.value = index;\n        emit(\"select\", index, indexPath, {\n          index,\n          indexPath\n        });\n      }\n    };\n    const updateActiveIndex = val => {\n      var _a;\n      const itemsInData = items.value;\n      const item = itemsInData[val] || activeIndex.value && itemsInData[activeIndex.value] || itemsInData[props.defaultActive];\n      activeIndex.value = (_a = item == null ? void 0 : item.index) != null ? _a : val;\n    };\n    const calcMenuItemWidth = menuItem => {\n      const computedStyle = getComputedStyle(menuItem);\n      const marginLeft = Number.parseInt(computedStyle.marginLeft, 10);\n      const marginRight = Number.parseInt(computedStyle.marginRight, 10);\n      return menuItem.offsetWidth + marginLeft + marginRight || 0;\n    };\n    const calcSliceIndex = () => {\n      var _a, _b;\n      if (!menu.value) return -1;\n      const items2 = Array.from((_b = (_a = menu.value) == null ? void 0 : _a.childNodes) != null ? _b : []).filter(item => item.nodeName !== \"#text\" || item.nodeValue);\n      const moreItemWidth = 64;\n      const computedMenuStyle = getComputedStyle(menu.value);\n      const paddingLeft = Number.parseInt(computedMenuStyle.paddingLeft, 10);\n      const paddingRight = Number.parseInt(computedMenuStyle.paddingRight, 10);\n      const menuWidth = menu.value.clientWidth - paddingLeft - paddingRight;\n      let calcWidth = 0;\n      let sliceIndex2 = 0;\n      items2.forEach((item, index) => {\n        if (item.nodeName === \"#comment\") return;\n        calcWidth += calcMenuItemWidth(item);\n        if (calcWidth <= menuWidth - moreItemWidth) {\n          sliceIndex2 = index + 1;\n        }\n      });\n      return sliceIndex2 === items2.length ? -1 : sliceIndex2;\n    };\n    const getIndexPath = index => subMenus.value[index].indexPath;\n    const debounce = (fn, wait = 33.34) => {\n      let timmer;\n      return () => {\n        timmer && clearTimeout(timmer);\n        timmer = setTimeout(() => {\n          fn();\n        }, wait);\n      };\n    };\n    let isFirstTimeRender = true;\n    const handleResize = () => {\n      if (sliceIndex.value === calcSliceIndex()) return;\n      const callback = () => {\n        sliceIndex.value = -1;\n        vue.nextTick(() => {\n          sliceIndex.value = calcSliceIndex();\n        });\n      };\n      isFirstTimeRender ? callback() : debounce(callback)();\n      isFirstTimeRender = false;\n    };\n    vue.watch(() => props.defaultActive, currentActive => {\n      if (!items.value[currentActive]) {\n        activeIndex.value = \"\";\n      }\n      updateActiveIndex(currentActive);\n    });\n    vue.watch(() => props.collapse, value => {\n      if (value) openedMenus.value = [];\n    });\n    vue.watch(items.value, initMenu);\n    let resizeStopper;\n    vue.watchEffect(() => {\n      if (props.mode === \"horizontal\" && props.ellipsis) resizeStopper = core.useResizeObserver(menu, handleResize).stop;else resizeStopper == null ? void 0 : resizeStopper();\n    });\n    const mouseInChild = vue.ref(false);\n    {\n      const addSubMenu = item => {\n        subMenus.value[item.index] = item;\n      };\n      const removeSubMenu = item => {\n        delete subMenus.value[item.index];\n      };\n      const addMenuItem = item => {\n        items.value[item.index] = item;\n      };\n      const removeMenuItem = item => {\n        delete items.value[item.index];\n      };\n      vue.provide(\"rootMenu\", vue.reactive({\n        props,\n        openedMenus,\n        items,\n        subMenus,\n        activeIndex,\n        isMenuPopup,\n        addMenuItem,\n        removeMenuItem,\n        addSubMenu,\n        removeSubMenu,\n        openMenu,\n        closeMenu,\n        handleMenuItemClick,\n        handleSubMenuClick\n      }));\n      vue.provide(`subMenu:${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        mouseInChild,\n        level: 0\n      });\n    }\n    vue.onMounted(() => {\n      if (props.mode === \"horizontal\") {\n        new menuBar[\"default\"](instance.vnode.el, nsMenu.namespace.value);\n      }\n    });\n    {\n      const open = index => {\n        const {\n          indexPath\n        } = subMenus.value[index];\n        indexPath.forEach(i => openMenu(i, indexPath));\n      };\n      expose({\n        open,\n        close,\n        handleResize\n      });\n    }\n    const ulStyle = useMenuCssVar.useMenuCssVar(props, 0);\n    return () => {\n      var _a, _b;\n      let slot = (_b = (_a = slots.default) == null ? void 0 : _a.call(slots)) != null ? _b : [];\n      const vShowMore = [];\n      if (props.mode === \"horizontal\" && menu.value) {\n        const originalSlot = vnode.flattedChildren(slot);\n        const slotDefault = sliceIndex.value === -1 ? originalSlot : originalSlot.slice(0, sliceIndex.value);\n        const slotMore = sliceIndex.value === -1 ? [] : originalSlot.slice(sliceIndex.value);\n        if ((slotMore == null ? void 0 : slotMore.length) && props.ellipsis) {\n          slot = slotDefault;\n          vShowMore.push(vue.h(subMenu[\"default\"], {\n            index: \"sub-menu-more\",\n            class: nsSubMenu.e(\"hide-arrow\"),\n            popperOffset: props.popperOffset\n          }, {\n            title: () => vue.h(index$1.ElIcon, {\n              class: nsSubMenu.e(\"icon-more\")\n            }, {\n              default: () => vue.h(props.ellipsisIcon)\n            }),\n            default: () => slotMore\n          }));\n        }\n      }\n      const directives = props.closeOnClickOutside ? [[index$2[\"default\"], () => {\n        if (!openedMenus.value.length) return;\n        if (!mouseInChild.value) {\n          openedMenus.value.forEach(openedMenu => emit(\"close\", openedMenu, getIndexPath(openedMenu)));\n          openedMenus.value = [];\n        }\n      }]] : [];\n      const vMenu = vue.withDirectives(vue.h(\"ul\", {\n        key: String(props.collapse),\n        role: \"menubar\",\n        ref: menu,\n        style: ulStyle.value,\n        class: {\n          [nsMenu.b()]: true,\n          [nsMenu.m(props.mode)]: true,\n          [nsMenu.m(\"collapse\")]: props.collapse\n        }\n      }, [...slot, ...vShowMore]), directives);\n      if (props.collapseTransition && props.mode === \"vertical\") {\n        return vue.h(menuCollapseTransition[\"default\"], () => vMenu);\n      }\n      return vMenu;\n    };\n  }\n});\nexports[\"default\"] = Menu;\nexports.menuEmits = menuEmits;\nexports.menuProps = menuProps;","map":{"version":3,"names":["menuProps","runtime","buildProps","mode","type","String","values","default","defaultActive","defaultOpeneds","definePropType","Array","typescript","mutable","uniqueOpened","Boolean","router","menuTrigger","collapse","backgroundColor","textColor","activeTextColor","closeOnClickOutside","collapseTransition","ellipsis","popperOffset","Number","ellipsisIcon","icon","iconPropType","iconsVue","More","popperEffect","popperClass","showTimeout","hideTimeout","persistent","checkIndexPath","indexPath","shared","isArray","every","path","isString","menuEmits","close","index","open","select","item","routerResult","isObject","Promise","Menu","vue","defineComponent","name","props","emits","setup","emit","slots","expose","instance","getCurrentInstance","appContext","config","globalProperties","$router","menu","ref","nsMenu","useNamespace","nsSubMenu","sliceIndex","openedMenus","slice","activeIndex","items","subMenus","isMenuPopup","computed","initMenu","activeItem","value","forEach","subMenu","openMenu","includes","filter","index2","push","i","indexOf","splice","closeMenu","handleSubMenuClick","isOpened","handleMenuItemClick","menuItem","lodashUnified","isNil","route","then","res","updateActiveIndex","val","_a","itemsInData","calcMenuItemWidth","computedStyle","getComputedStyle","marginLeft","parseInt","marginRight","offsetWidth","calcSliceIndex","_b","items2","from","childNodes","nodeName","nodeValue","moreItemWidth","computedMenuStyle","paddingLeft","paddingRight","menuWidth","clientWidth","calcWidth","sliceIndex2","length","getIndexPath","debounce","fn","wait","timmer","clearTimeout","setTimeout","isFirstTimeRender","handleResize","callback","nextTick","watch","currentActive","resizeStopper","watchEffect","core","useResizeObserver","stop","mouseInChild","addSubMenu","removeSubMenu","addMenuItem","removeMenuItem","provide","reactive","uid","level","onMounted","menuBar","vnode","el","namespace","ulStyle","useMenuCssVar","slot","call","vShowMore","originalSlot","flattedChildren","slotDefault","slotMore","h","class","e","title","index$1","ElIcon","directives","index$2","openedMenu","vMenu","withDirectives","key","role","style","b","m","menuCollapseTransition"],"sources":["../../../../../../packages/components/menu/src/menu.ts"],"sourcesContent":["import {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  h,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  watch,\n  watchEffect,\n  withDirectives,\n} from 'vue'\n\nimport { useResizeObserver } from '@vueuse/core'\nimport { isNil } from 'lodash-unified'\nimport ElIcon from '@element-plus/components/icon'\nimport { More } from '@element-plus/icons-vue'\nimport {\n  buildProps,\n  definePropType,\n  flattedChildren,\n  iconPropType,\n  isArray,\n  isObject,\n  isString,\n  mutable,\n} from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { ClickOutside as vClickoutside } from '@element-plus/directives'\nimport Menubar from './utils/menu-bar'\nimport ElMenuCollapseTransition from './menu-collapse-transition.vue'\nimport ElSubMenu from './sub-menu'\nimport { useMenuCssVar } from './use-menu-css-var'\nimport type { PopperEffect } from '@element-plus/components/popper'\n\nimport type { MenuItemClicked, MenuProvider, SubMenuProvider } from './types'\nimport type { NavigationFailure, Router } from 'vue-router'\nimport type {\n  Component,\n  DirectiveArguments,\n  ExtractPropTypes,\n  VNode,\n  VNodeArrayChildren,\n} from 'vue'\nimport type { UseResizeObserverReturn } from '@vueuse/core'\n\nexport const menuProps = buildProps({\n  /**\n   * @description menu display mode\n   */\n  mode: {\n    type: String,\n    values: ['horizontal', 'vertical'],\n    default: 'vertical',\n  },\n  /**\n   * @description index of active menu on page load\n   */\n  defaultActive: {\n    type: String,\n    default: '',\n  },\n  /**\n   * @description array that contains indexes of currently active sub-menus\n   */\n  defaultOpeneds: {\n    type: definePropType<string[]>(Array),\n    default: () => mutable([] as const),\n  },\n  /**\n   * @description whether only one sub-menu can be active\n   */\n  uniqueOpened: Boolean,\n  /**\n   * @description whether `vue-router` mode is activated. If true, index will be used as 'path' to activate the route action. Use with `default-active` to set the active item on load.\n   */\n  router: Boolean,\n  /**\n   * @description how sub-menus are triggered, only works when `mode` is 'horizontal'\n   */\n  menuTrigger: {\n    type: String,\n    values: ['hover', 'click'],\n    default: 'hover',\n  },\n  /**\n   * @description whether the menu is collapsed (available only in vertical mode)\n   */\n  collapse: Boolean,\n  /**\n   * @description background color of Menu (hex format) (deprecated, use `--bg-color` instead)\n   * @deprecated use `--bg-color` instead\n   */\n  backgroundColor: String,\n  /**\n   * @description text color of Menu (hex format) (deprecated, use `--text-color` instead)\n   * @deprecated use `--text-color` instead\n   */\n  textColor: String,\n  /**\n   * @description text color of currently active menu item (hex format) (deprecated, use `--active-color` instead)\n   * @deprecated use `--active-color` instead\n   */\n  activeTextColor: String,\n  /**\n   * @description optional, whether menu is collapsed when clicking outside\n   */\n  closeOnClickOutside: Boolean,\n  /**\n   * @description whether to enable the collapse transition\n   */\n  collapseTransition: {\n    type: Boolean,\n    default: true,\n  },\n  /**\n   * @description whether the menu is ellipsis (available only in horizontal mode)\n   */\n  ellipsis: {\n    type: Boolean,\n    default: true,\n  },\n  /**\n   * @description offset of the popper (effective for all submenus)\n   */\n  popperOffset: {\n    type: Number,\n    default: 6,\n  },\n  /**\n   * @description custom ellipsis icon (available only in horizontal mode and ellipsis is true)\n   */\n  ellipsisIcon: {\n    type: iconPropType,\n    default: () => More,\n  },\n  /**\n   * @description Tooltip theme, built-in theme: `dark` / `light` when menu is collapsed\n   */\n  popperEffect: {\n    type: definePropType<PopperEffect>(String),\n    default: 'dark',\n  },\n  /**\n   * @description custom class name for all popup menus\n   */\n  popperClass: String,\n  /**\n   * @description control timeout for all menus before showing\n   */\n  showTimeout: {\n    type: Number,\n    default: 300,\n  },\n  /**\n   * @description control timeout for all menus before hiding\n   */\n  hideTimeout: {\n    type: Number,\n    default: 300,\n  },\n  /**\n   * @description when menu inactive and `persistent` is `false` , dropdown menu will be destroyed\n   */\n  persistent: {\n    type: Boolean,\n    default: true,\n  },\n} as const)\nexport type MenuProps = ExtractPropTypes<typeof menuProps>\n\nconst checkIndexPath = (indexPath: unknown): indexPath is string[] =>\n  isArray(indexPath) && indexPath.every((path) => isString(path))\n\nexport const menuEmits = {\n  close: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  open: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  select: (\n    index: string,\n    indexPath: string[],\n    item: MenuItemClicked,\n    routerResult?: Promise<void | NavigationFailure>\n  ) =>\n    isString(index) &&\n    checkIndexPath(indexPath) &&\n    isObject(item) &&\n    (routerResult === undefined || routerResult instanceof Promise),\n}\nexport type MenuEmits = typeof menuEmits\n\nexport default defineComponent({\n  name: 'ElMenu',\n\n  props: menuProps,\n  emits: menuEmits,\n\n  setup(props, { emit, slots, expose }) {\n    const instance = getCurrentInstance()!\n    const router = instance.appContext.config.globalProperties.$router as Router\n    const menu = ref<HTMLUListElement>()\n    const nsMenu = useNamespace('menu')\n    const nsSubMenu = useNamespace('sub-menu')\n\n    // data\n    const sliceIndex = ref(-1)\n\n    const openedMenus = ref<MenuProvider['openedMenus']>(\n      props.defaultOpeneds && !props.collapse\n        ? props.defaultOpeneds.slice(0)\n        : []\n    )\n    const activeIndex = ref<MenuProvider['activeIndex']>(props.defaultActive)\n    const items = ref<MenuProvider['items']>({})\n    const subMenus = ref<MenuProvider['subMenus']>({})\n\n    // computed\n    const isMenuPopup = computed<MenuProvider['isMenuPopup']>(\n      () =>\n        props.mode === 'horizontal' ||\n        (props.mode === 'vertical' && props.collapse)\n    )\n\n    // methods\n    const initMenu = () => {\n      const activeItem = activeIndex.value && items.value[activeIndex.value]\n      if (!activeItem || props.mode === 'horizontal' || props.collapse) return\n\n      const indexPath = activeItem.indexPath\n\n      // 展开该菜单项的路径上所有子菜单\n      // expand all subMenus of the menu item\n      indexPath.forEach((index) => {\n        const subMenu = subMenus.value[index]\n        subMenu && openMenu(index, subMenu.indexPath)\n      })\n    }\n\n    const openMenu: MenuProvider['openMenu'] = (index, indexPath) => {\n      if (openedMenus.value.includes(index)) return\n      // 将不在该菜单路径下的其余菜单收起\n      // collapse all menu that are not under current menu item\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter((index: string) =>\n          indexPath.includes(index)\n        )\n      }\n      openedMenus.value.push(index)\n      emit('open', index, indexPath)\n    }\n\n    const close = (index: string) => {\n      const i = openedMenus.value.indexOf(index)\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1)\n      }\n    }\n\n    const closeMenu: MenuProvider['closeMenu'] = (index, indexPath) => {\n      close(index)\n      emit('close', index, indexPath)\n    }\n\n    const handleSubMenuClick: MenuProvider['handleSubMenuClick'] = ({\n      index,\n      indexPath,\n    }) => {\n      const isOpened = openedMenus.value.includes(index)\n\n      isOpened ? closeMenu(index, indexPath) : openMenu(index, indexPath)\n    }\n\n    const handleMenuItemClick: MenuProvider['handleMenuItemClick'] = (\n      menuItem\n    ) => {\n      if (props.mode === 'horizontal' || props.collapse) {\n        openedMenus.value = []\n      }\n      const { index, indexPath } = menuItem\n      if (isNil(index) || isNil(indexPath)) return\n\n      if (props.router && router) {\n        const route = menuItem.route || index\n        const routerResult = router.push(route).then((res) => {\n          if (!res) activeIndex.value = index\n          return res\n        })\n        emit(\n          'select',\n          index,\n          indexPath,\n          { index, indexPath, route },\n          routerResult\n        )\n      } else {\n        activeIndex.value = index\n        emit('select', index, indexPath, { index, indexPath })\n      }\n    }\n\n    const updateActiveIndex = (val: string) => {\n      const itemsInData = items.value\n      const item =\n        itemsInData[val] ||\n        (activeIndex.value && itemsInData[activeIndex.value]) ||\n        itemsInData[props.defaultActive]\n\n      activeIndex.value = item?.index ?? val\n    }\n\n    const calcMenuItemWidth = (menuItem: HTMLElement) => {\n      const computedStyle = getComputedStyle(menuItem)\n      const marginLeft = Number.parseInt(computedStyle.marginLeft, 10)\n      const marginRight = Number.parseInt(computedStyle.marginRight, 10)\n      return menuItem.offsetWidth + marginLeft + marginRight || 0\n    }\n\n    const calcSliceIndex = () => {\n      if (!menu.value) return -1\n      const items = Array.from(menu.value?.childNodes ?? []).filter(\n        (item) => item.nodeName !== '#text' || item.nodeValue\n      ) as HTMLElement[]\n      const moreItemWidth = 64\n      const computedMenuStyle = getComputedStyle(menu.value!)\n      const paddingLeft = Number.parseInt(computedMenuStyle.paddingLeft, 10)\n      const paddingRight = Number.parseInt(computedMenuStyle.paddingRight, 10)\n      const menuWidth = menu.value!.clientWidth - paddingLeft - paddingRight\n      let calcWidth = 0\n      let sliceIndex = 0\n      items.forEach((item, index) => {\n        if (item.nodeName === '#comment') return\n        calcWidth += calcMenuItemWidth(item)\n        if (calcWidth <= menuWidth - moreItemWidth) {\n          sliceIndex = index + 1\n        }\n      })\n      return sliceIndex === items.length ? -1 : sliceIndex\n    }\n\n    const getIndexPath = (index: string) => subMenus.value[index].indexPath\n\n    // Common computer monitor FPS is 60Hz, which means 60 redraws per second. Calculation formula: 1000ms/60 ≈ 16.67ms, In order to avoid a certain chance of repeated triggering when `resize`, set wait to 16.67 * 2 = 33.34\n    const debounce = (fn: () => void, wait = 33.34) => {\n      let timmer: ReturnType<typeof setTimeout> | null\n      return () => {\n        timmer && clearTimeout(timmer)\n        timmer = setTimeout(() => {\n          fn()\n        }, wait)\n      }\n    }\n\n    let isFirstTimeRender = true\n    const handleResize = () => {\n      if (sliceIndex.value === calcSliceIndex()) return\n      const callback = () => {\n        sliceIndex.value = -1\n        nextTick(() => {\n          sliceIndex.value = calcSliceIndex()\n        })\n      }\n      // execute callback directly when first time resize to avoid shaking\n      isFirstTimeRender ? callback() : debounce(callback)()\n      isFirstTimeRender = false\n    }\n\n    watch(\n      () => props.defaultActive,\n      (currentActive) => {\n        if (!items.value[currentActive]) {\n          activeIndex.value = ''\n        }\n        updateActiveIndex(currentActive)\n      }\n    )\n\n    watch(\n      () => props.collapse,\n      (value) => {\n        if (value) openedMenus.value = []\n      }\n    )\n\n    watch(items.value, initMenu)\n\n    let resizeStopper: UseResizeObserverReturn['stop']\n    watchEffect(() => {\n      if (props.mode === 'horizontal' && props.ellipsis)\n        resizeStopper = useResizeObserver(menu, handleResize).stop\n      else resizeStopper?.()\n    })\n\n    const mouseInChild = ref(false)\n\n    // provide\n    {\n      const addSubMenu: MenuProvider['addSubMenu'] = (item) => {\n        subMenus.value[item.index] = item\n      }\n\n      const removeSubMenu: MenuProvider['removeSubMenu'] = (item) => {\n        delete subMenus.value[item.index]\n      }\n\n      const addMenuItem: MenuProvider['addMenuItem'] = (item) => {\n        items.value[item.index] = item\n      }\n\n      const removeMenuItem: MenuProvider['removeMenuItem'] = (item) => {\n        delete items.value[item.index]\n      }\n      provide<MenuProvider>(\n        'rootMenu',\n        reactive({\n          props,\n          openedMenus,\n          items,\n          subMenus,\n          activeIndex,\n          isMenuPopup,\n\n          addMenuItem,\n          removeMenuItem,\n          addSubMenu,\n          removeSubMenu,\n          openMenu,\n          closeMenu,\n          handleMenuItemClick,\n          handleSubMenuClick,\n        })\n      )\n      provide<SubMenuProvider>(`subMenu:${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        mouseInChild,\n        level: 0,\n      })\n    }\n\n    // lifecycle\n    onMounted(() => {\n      if (props.mode === 'horizontal') {\n        new Menubar(instance.vnode.el!, nsMenu.namespace.value)\n      }\n    })\n\n    {\n      const open = (index: string) => {\n        const { indexPath } = subMenus.value[index]\n        indexPath.forEach((i) => openMenu(i, indexPath))\n      }\n\n      expose({\n        open,\n        close,\n        handleResize,\n      })\n    }\n\n    const ulStyle = useMenuCssVar(props, 0)\n\n    return () => {\n      let slot: VNodeArrayChildren = slots.default?.() ?? []\n      const vShowMore: VNode[] = []\n\n      if (props.mode === 'horizontal' && menu.value) {\n        const originalSlot = flattedChildren(slot) as VNodeArrayChildren\n        const slotDefault =\n          sliceIndex.value === -1\n            ? originalSlot\n            : originalSlot.slice(0, sliceIndex.value)\n\n        const slotMore =\n          sliceIndex.value === -1 ? [] : originalSlot.slice(sliceIndex.value)\n\n        if (slotMore?.length && props.ellipsis) {\n          slot = slotDefault\n          vShowMore.push(\n            h(\n              ElSubMenu,\n              {\n                index: 'sub-menu-more',\n                class: nsSubMenu.e('hide-arrow'),\n                popperOffset: props.popperOffset,\n              },\n              {\n                title: () =>\n                  h(\n                    ElIcon,\n                    {\n                      class: nsSubMenu.e('icon-more'),\n                    },\n                    {\n                      default: () => h(props.ellipsisIcon as Component),\n                    }\n                  ),\n                default: () => slotMore,\n              }\n            )\n          )\n        }\n      }\n\n      const directives: DirectiveArguments = props.closeOnClickOutside\n        ? [\n            [\n              vClickoutside,\n              () => {\n                if (!openedMenus.value.length) return\n\n                if (!mouseInChild.value) {\n                  openedMenus.value.forEach((openedMenu) =>\n                    emit('close', openedMenu, getIndexPath(openedMenu))\n                  )\n\n                  openedMenus.value = []\n                }\n              },\n            ],\n          ]\n        : []\n\n      const vMenu = withDirectives(\n        h(\n          'ul',\n          {\n            key: String(props.collapse),\n            role: 'menubar',\n            ref: menu,\n            style: ulStyle.value,\n            class: {\n              [nsMenu.b()]: true,\n              [nsMenu.m(props.mode)]: true,\n              [nsMenu.m('collapse')]: props.collapse,\n            },\n          },\n          [...slot, ...vShowMore]\n        ),\n        directives\n      )\n\n      if (props.collapseTransition && props.mode === 'vertical') {\n        return h(ElMenuCollapseTransition, () => vMenu)\n      }\n\n      return vMenu\n    }\n  },\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}