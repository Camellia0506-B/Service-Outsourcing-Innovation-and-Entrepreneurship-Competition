{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { newPostAPI } from '@/api/posts';\nimport { univPostsAPI, universitiesAPI } from '@/api/universities';\nexport default {\n  name: 'Posts',\n  data() {\n    return {\n      // ===== ÂàóË°®Áõ∏ÂÖ≥ =====\n      posts: [],\n      loading: false,\n      searchKeyword: '',\n      univ_id: 0,\n      // 0=ÂÖ®ÈÉ®ÔºàÊù•Ëá™Ë∑ØÁî± queryÔºâ\n\n      // ===== ÂèëÂ∏ÉÂºπÁ™óÁõ∏ÂÖ≥ =====\n      showDialog: false,\n      submitting: false,\n      newPost: {\n        title: '',\n        content: '',\n        univ_id: ''\n      },\n      // ===== Â≠¶Ê†°ÈÄâÊã©ÂºπÁ™óÁõ∏ÂÖ≥ =====\n      showUnivSelector: false,\n      allUnivs: [],\n      selectedUnivName: '',\n      loadingUnivs: false,\n      univSearchKeyword: '',\n      univSelectedRegion: ''\n    };\n  },\n  computed: {\n    isFormValid() {\n      return this.newPost.title.trim() && this.newPost.content.trim();\n    },\n    // ÊèêÂèñÊâÄÊúâÂú∞Âå∫\n    availableRegions() {\n      const regions = new Set();\n      this.allUnivs.forEach(u => {\n        const match = u.univ_name.match(/^(‰∏äÊµ∑|Âåó‰∫¨|Â§©Ê¥•|ÈáçÂ∫Ü|Ê±üËãè|ÊµôÊ±ü|Âπø‰∏ú|ÂõõÂ∑ù|ÊπñÂåó|Â±±‰∏ú|ÈôïË•ø|ËæΩÂÆÅ|ÊπñÂçó|Á¶èÂª∫|Ê≤≥Âçó|Ê≤≥Âåó|ÂÆâÂæΩ|ÈªëÈæôÊ±ü|ÂêâÊûó|‰∫ëÂçó|Â±±Ë•ø|Ê±üË•ø|Ë¥µÂ∑û|ÂπøË•ø|ÁîòËÇÉ|ÂÜÖËíôÂè§|Êñ∞ÁñÜ|Êµ∑Âçó|ÂÆÅÂ§è|ÈùíÊµ∑|Ë•øËóè|È¶ôÊ∏Ø|Êæ≥Èó®|Âè∞Êπæ)/);\n        if (match) regions.add(match[1]);\n      });\n      return Array.from(regions).sort();\n    },\n    // ËøáÊª§ÂêéÁöÑÂ≠¶Ê†°ÂàóË°®\n    filteredUnivsList() {\n      let list = this.allUnivs;\n\n      // ÊåâÂú∞Âå∫Á≠õÈÄâ\n      if (this.univSelectedRegion) {\n        list = list.filter(u => u.univ_name.startsWith(this.univSelectedRegion));\n      }\n\n      // ÊåâÂÖ≥ÈîÆËØçÊêúÁ¥¢\n      if (this.univSearchKeyword.trim()) {\n        const kw = this.univSearchKeyword.trim().toLowerCase();\n        list = list.filter(u => u.univ_name.toLowerCase().includes(kw));\n      }\n      return list;\n    }\n  },\n  mounted() {\n    const q = this.$route.query.univ_id;\n    if (q !== undefined) this.univ_id = Number(q) || 0;\n    this.loadPosts();\n    this.loadUniversities();\n  },\n  methods: {\n    // =========================\n    // 1) Â∏ñÂ≠êÂàóË°®\n    // =========================\n    async loadPosts() {\n      this.loading = true;\n      try {\n        const body = await univPostsAPI({\n          univ_id: this.univ_id === 0 ? '' : this.univ_id,\n          keyword: this.searchKeyword.trim()\n        });\n\n        // ÂêéÁ´ØÔºö{ code:200, data:[...] }\n        this.posts = Array.isArray(body?.data) ? body.data : [];\n      } catch (err) {\n        console.error('[Posts] loadPosts failed:', err);\n        this.$message?.error?.('Âä†ËΩΩÂ∏ñÂ≠êÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');\n      } finally {\n        this.loading = false;\n      }\n    },\n    onSearch() {\n      this.loadPosts();\n    },\n    // =========================\n    // 2) ÁÇπÂáªË∑≥Â∏ñÂ≠êËØ¶ÊÉÖÔºàÊñπÊ°àAÔºâ\n    // Ë∑ØÁî±Ôºö/main/posts/detail/:id\n    // =========================\n    viewPostDetail(postId) {\n      if (!postId) {\n        this.$message?.error?.('Â∏ñÂ≠êIDÁº∫Â§±');\n        return;\n      }\n      this.$router.push({\n        name: 'Postdetail',\n        // ‚ö†Ô∏è Âíå router Èáå name ÂÆåÂÖ®‰∏ÄËá¥\n        params: {\n          id: String(postId)\n        }\n      });\n    },\n    // =========================\n    // 3) Â≠¶Ê†°ÂàóË°®ÔºàÁî®‰∫éÈÄâÊã©ÂÖ≥ËÅîÂ≠¶Ê†°Ôºâ\n    // =========================\n    async loadUniversities() {\n      this.loadingUnivs = true;\n      try {\n        const res = await universitiesAPI({\n          page: 1,\n          size: 1000\n        });\n        // ‰Ω†‰πãÂâçÁöÑÂÖºÂÆπÔºöres.data.list -> {id,name,logo_url}\n        if (res?.code === 200 && Array.isArray(res?.data?.list)) {\n          this.allUnivs = res.data.list.map(u => ({\n            univ_id: u.id,\n            univ_name: u.name,\n            logo_url: u.logo_url\n          }));\n        } else {\n          // Â¶ÇÊûúÂêéÁ´ØÁõ¥Êé•ËøîÂõûÊï∞ÁªÑÔºå‰πüÂÖºÂÆπ‰∏Ä‰∏ã\n          const arr = Array.isArray(res?.data) ? res.data : [];\n          if (arr.length) {\n            this.allUnivs = arr.map(u => ({\n              univ_id: u.id ?? u.univ_id,\n              univ_name: u.name ?? u.univ_name,\n              logo_url: u.logo_url\n            }));\n          }\n        }\n      } catch (e) {\n        console.error('[Posts] loadUniversities failed:', e);\n      } finally {\n        this.loadingUnivs = false;\n      }\n    },\n    selectUniv(univ) {\n      this.newPost.univ_id = univ.univ_id;\n      this.selectedUnivName = univ.univ_name;\n      this.showUnivSelector = false;\n      this.univSearchKeyword = '';\n      this.univSelectedRegion = '';\n    },\n    clearSelectedUniv() {\n      this.newPost.univ_id = '';\n      this.selectedUnivName = '';\n    },\n    // =========================\n    // 4) ÂèëÂ∏ÉÂ∏ñÂ≠êÂºπÁ™ó\n    // =========================\n    async showNewPostDialog() {\n      const userId = localStorage.getItem('user_id');\n      if (!userId) {\n        alert('ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçÂèëÂ∏ÉÂ∏ñÂ≠ê');\n        this.$router.push('/login');\n        return;\n      }\n\n      // Â¶ÇÊûúÂ≠¶Ê†°ËøòÊ≤°Âä†ËΩΩÂÆåÔºåË°•Êãâ‰∏ÄÊ¨°\n      if (!this.allUnivs.length && !this.loadingUnivs) {\n        await this.loadUniversities();\n      }\n      this.showDialog = true;\n      this.resetForm();\n    },\n    closeDialog() {\n      this.showDialog = false;\n      this.showUnivSelector = false;\n      this.resetForm();\n    },\n    resetForm() {\n      this.newPost = {\n        title: '',\n        content: '',\n        univ_id: this.univ_id > 0 ? this.univ_id : ''\n      };\n      this.selectedUnivName = '';\n\n      // Â¶ÇÊûúÂΩìÂâçÈ°µÈù¢ÊòØÊüê‰∏™Â≠¶Ê†°‰∏ãÁöÑÂ∏ñÂ≠êÔºåÈªòËÆ§ÈÄâ‰∏≠ËØ•Ê†°\n      if (this.univ_id > 0) {\n        const u = this.allUnivs.find(x => x.univ_id === this.univ_id);\n        if (u) {\n          this.selectedUnivName = u.univ_name;\n          this.newPost.univ_id = u.univ_id;\n        }\n      }\n      this.univSearchKeyword = '';\n      this.univSelectedRegion = '';\n    },\n    async submitPost() {\n      if (!this.newPost.title.trim()) return alert('ËØ∑ËæìÂÖ•Ê†áÈ¢ò');\n      if (!this.newPost.content.trim()) return alert('ËØ∑ËæìÂÖ•ÂÜÖÂÆπ');\n      this.submitting = true;\n      try {\n        const user_id = localStorage.getItem('user_id') || '1';\n        const params = {\n          user_id,\n          title: this.newPost.title.trim(),\n          content: this.newPost.content.trim()\n        };\n        if (this.newPost.univ_id) {\n          params.univ_id = Number(this.newPost.univ_id);\n        }\n        await newPostAPI(params);\n        alert('ÂèëÂ∏ÉÊàêÂäüÔºÅ');\n        this.closeDialog();\n        await this.loadPosts();\n      } catch (err) {\n        console.error('ÂèëÂ∏ÉÂ§±Ë¥•:', err);\n        alert(err?.message || 'ÂèëÂ∏ÉÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');\n      } finally {\n        this.submitting = false;\n      }\n    },\n    // =========================\n    // 5) Â∑•ÂÖ∑ÂáΩÊï∞\n    // =========================\n    getContentPreview(content) {\n      if (!content) return '';\n      return content.length > 100 ? content.substring(0, 100) + '...' : content;\n    },\n    formatFullTime(time) {\n      if (!time) return '';\n      const date = new Date(time);\n      const y = date.getFullYear();\n      const m = String(date.getMonth() + 1).padStart(2, '0');\n      const d = String(date.getDate()).padStart(2, '0');\n      const hh = String(date.getHours()).padStart(2, '0');\n      const mm = String(date.getMinutes()).padStart(2, '0');\n      const ss = String(date.getSeconds()).padStart(2, '0');\n      return `${y}-${m}-${d} ${hh}:${mm}:${ss}`;\n    }\n  }\n};","map":{"version":3,"names":["newPostAPI","univPostsAPI","universitiesAPI","name","data","posts","loading","searchKeyword","univ_id","showDialog","submitting","newPost","title","content","showUnivSelector","allUnivs","selectedUnivName","loadingUnivs","univSearchKeyword","univSelectedRegion","computed","isFormValid","trim","availableRegions","regions","Set","forEach","u","match","univ_name","add","Array","from","sort","filteredUnivsList","list","filter","startsWith","kw","toLowerCase","includes","mounted","q","$route","query","undefined","Number","loadPosts","loadUniversities","methods","body","keyword","isArray","err","console","error","$message","onSearch","viewPostDetail","postId","$router","push","params","id","String","res","page","size","code","map","logo_url","arr","length","e","selectUniv","univ","clearSelectedUniv","showNewPostDialog","userId","localStorage","getItem","alert","resetForm","closeDialog","find","x","submitPost","user_id","message","getContentPreview","substring","formatFullTime","time","date","Date","y","getFullYear","m","getMonth","padStart","d","getDate","hh","getHours","mm","getMinutes","ss","getSeconds"],"sources":["D:\\Projects\\Service-Outsourcing-Innovation-and-Entrepreneurship-Competition\\frontend\\src\\views\\Posts.vue"],"sourcesContent":["<template>\r\n    <div class=\"posts-page\">\r\n        <!-- È°∂ÈÉ®ÂØºËà™ -->\r\n        <div class=\"header\">\r\n            <h1 class=\"title\">ÁÉ≠Èó®ËÆ®ËÆ∫</h1>\r\n            <div class=\"header-actions\">\r\n                <input\r\n                    type=\"text\"\r\n                    class=\"search-input\"\r\n                    placeholder=\"ÊêúÁ¥¢Â∏ñÂ≠êÊ†áÈ¢ò/ÂÜÖÂÆπ...\"\r\n                    v-model=\"searchKeyword\"\r\n                    @keyup.enter=\"onSearch\"\r\n                />\r\n                <button class=\"btn-search\" @click=\"onSearch\">ÊêúÁ¥¢</button>\r\n                <button class=\"btn-new\" @click=\"showNewPostDialog\">\r\n                    + ÂèëÂ∏ÉÂ∏ñÂ≠ê\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Â∏ñÂ≠êÂàóË°® -->\r\n        <div class=\"posts-container\">\r\n            <div\r\n                v-for=\"post in posts\"\r\n                :key=\"post.id\"\r\n                class=\"post-item\"\r\n                @click=\"viewPostDetail(post.id)\"\r\n            >\r\n                <div class=\"post-main\">\r\n                    <h2 class=\"post-title\">{{ post.title }}</h2>\r\n                    <p class=\"post-preview\" v-if=\"post.content\">\r\n                        {{ getContentPreview(post.content) }}\r\n                    </p>\r\n                    <div class=\"post-meta\">\r\n                        <span class=\"author\">\r\n                            {{\r\n                                post.author_name ||\r\n                                `Áî®Êà∑${post.user_id || post.id}`\r\n                            }}\r\n                        </span>\r\n                        <span class=\"meta-item\">\r\n                            <i class=\"icon-view\">üëÅ</i>\r\n                            {{ post.view_count || 0 }}\r\n                        </span>\r\n                        <span class=\"meta-item\">\r\n                            <i class=\"icon-comment\">üí¨</i>\r\n                            {{ post.reply_count || 0 }} ÂõûÂ§ç\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"post-time\">\r\n                    {{ formatFullTime(post.created_at) }}\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if=\"posts.length === 0 && !loading\" class=\"empty\">\r\n                <div class=\"empty-icon\">üìù</div>\r\n                <p>ÊöÇÊó†Â∏ñÂ≠ê</p>\r\n                <button class=\"btn-new-empty\" @click=\"showNewPostDialog\">\r\n                    ÂèëÂ∏ÉÁ¨¨‰∏Ä‰∏™Â∏ñÂ≠ê\r\n                </button>\r\n            </div>\r\n\r\n            <div v-if=\"loading\" class=\"loading\">\r\n                <div class=\"loading-spinner\"></div>\r\n                <p>Âä†ËΩΩ‰∏≠...</p>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- ÂèëÂ∏ÉÂØπËØùÊ°Ü -->\r\n        <div v-if=\"showDialog\" class=\"modal-overlay\" @click=\"closeDialog\">\r\n            <div class=\"modal-box\" @click.stop>\r\n                <div class=\"modal-header\">\r\n                    <h3>ÂèëÂ∏ÉÊñ∞Â∏ñ</h3>\r\n                    <button class=\"btn-close\" @click=\"closeDialog\">√ó</button>\r\n                </div>\r\n\r\n                <div class=\"modal-body\">\r\n                    <div class=\"form-item\">\r\n                        <label>Ê†áÈ¢ò <span class=\"required\">*</span></label>\r\n                        <input\r\n                            v-model=\"newPost.title\"\r\n                            type=\"text\"\r\n                            placeholder=\"ËØ∑ËæìÂÖ•Â∏ñÂ≠êÊ†áÈ¢ò\"\r\n                            maxlength=\"100\"\r\n                        />\r\n                        <div class=\"char-count\">\r\n                            {{ newPost.title.length }}/100\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-item\">\r\n                        <label>ÂÜÖÂÆπ <span class=\"required\">*</span></label>\r\n                        <textarea\r\n                            v-model=\"newPost.content\"\r\n                            placeholder=\"ÂàÜ‰∫´‰Ω†ÁöÑÊÉ≥Ê≥ï...\"\r\n                            rows=\"8\"\r\n                            maxlength=\"5000\"\r\n                        ></textarea>\r\n                        <div class=\"char-count\">\r\n                            {{ newPost.content.length }}/5000\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-item\">\r\n                        <label>ÂÖ≥ËÅîÂ≠¶Ê†°ÔºàÂèØÈÄâÔºâ</label>\r\n                        <div\r\n                            class=\"univ-selector\"\r\n                            @click=\"\r\n                                ;(showUnivSelector = true),\r\n                                    console.log(\r\n                                        'open selector',\r\n                                        showUnivSelector\r\n                                    )\r\n                            \"\r\n                        >\r\n                            <input\r\n                                type=\"text\"\r\n                                :value=\"selectedUnivName || ''\"\r\n                                placeholder=\"ÁÇπÂáªÈÄâÊã©Â≠¶Ê†°Ôºà‰∏çÈÄâÂàô‰∏çÂÖ≥ËÅîÔºâ\"\r\n                                readonly\r\n                            />\r\n                            <!-- <span class=\"selector-icon\">{{\r\n                                selectedUnivName ? '‚úì' : '‚ñº'\r\n                            }}</span> -->\r\n                        </div>\r\n                        <!-- <div v-if=\"selectedUnivName\" class=\"selected-tag\">\r\n                            {{ selectedUnivName }}\r\n                            <span class=\"remove-tag\" @click=\"clearSelectedUniv\"\r\n                                >√ó</span\r\n                            >\r\n                        </div> -->\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"modal-footer\">\r\n                    <button class=\"btn-cancel\" @click=\"closeDialog\">\r\n                        ÂèñÊ∂à\r\n                    </button>\r\n                    <button\r\n                        class=\"btn-submit\"\r\n                        @click=\"submitPost\"\r\n                        :disabled=\"submitting || !isFormValid\"\r\n                    >\r\n                        {{ submitting ? 'ÂèëÂ∏É‰∏≠...' : 'ÂèëÂ∏É' }}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <!-- Â≠¶Ê†°ÈÄâÊã©ÂºπÁ™ó -->\r\n            <div\r\n                v-if=\"showUnivSelector\"\r\n                class=\"univ-modal-overlay\"\r\n                @click=\"showUnivSelector = false\"\r\n            >\r\n                <div class=\"univ-modal\" @click.stop>\r\n                    <div class=\"univ-modal-header\">\r\n                        <div class=\"univ-modal-title\">ÈÄâÊã©Â≠¶Ê†°</div>\r\n                        <button\r\n                            class=\"univ-modal-close\"\r\n                            @click=\"showUnivSelector = false\"\r\n                        >\r\n                            √ó\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div class=\"univ-modal-tools\">\r\n                        <input\r\n                            class=\"univ-search\"\r\n                            v-model=\"univSearchKeyword\"\r\n                            placeholder=\"ÊêúÁ¥¢Â≠¶Ê†°ÂêçÁß∞...\"\r\n                        />\r\n                        <select\r\n                            class=\"univ-region\"\r\n                            v-model=\"univSelectedRegion\"\r\n                        >\r\n                            <option value=\"\">ÂÖ®ÈÉ®Âú∞Âå∫</option>\r\n                            <option\r\n                                v-for=\"r in availableRegions\"\r\n                                :key=\"r\"\r\n                                :value=\"r\"\r\n                            >\r\n                                {{ r }}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"univ-modal-list\">\r\n                        <div v-if=\"loadingUnivs\" class=\"univ-loading\">\r\n                            Âä†ËΩΩÂ≠¶Ê†°‰∏≠...\r\n                        </div>\r\n\r\n                        <div\r\n                            v-else\r\n                            v-for=\"u in filteredUnivsList\"\r\n                            :key=\"u.univ_id\"\r\n                            class=\"univ-item\"\r\n                            @click=\"selectUniv(u)\"\r\n                        >\r\n                            <img\r\n                                v-if=\"u.logo_url\"\r\n                                :src=\"u.logo_url\"\r\n                                class=\"univ-logo\"\r\n                            />\r\n                            <div class=\"univ-name\">{{ u.univ_name }}</div>\r\n                        </div>\r\n\r\n                        <div\r\n                            v-if=\"\r\n                                !loadingUnivs && filteredUnivsList.length === 0\r\n                            \"\r\n                            class=\"univ-empty\"\r\n                        >\r\n                            Ê≤°ÊúâÂåπÈÖçÁöÑÂ≠¶Ê†°\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { newPostAPI } from '@/api/posts'\r\nimport { univPostsAPI, universitiesAPI } from '@/api/universities'\r\n\r\nexport default {\r\n    name: 'Posts',\r\n\r\n    data() {\r\n        return {\r\n            // ===== ÂàóË°®Áõ∏ÂÖ≥ =====\r\n            posts: [],\r\n            loading: false,\r\n            searchKeyword: '',\r\n            univ_id: 0, // 0=ÂÖ®ÈÉ®ÔºàÊù•Ëá™Ë∑ØÁî± queryÔºâ\r\n\r\n            // ===== ÂèëÂ∏ÉÂºπÁ™óÁõ∏ÂÖ≥ =====\r\n            showDialog: false,\r\n            submitting: false,\r\n            newPost: {\r\n                title: '',\r\n                content: '',\r\n                univ_id: ''\r\n            },\r\n\r\n            // ===== Â≠¶Ê†°ÈÄâÊã©ÂºπÁ™óÁõ∏ÂÖ≥ =====\r\n            showUnivSelector: false,\r\n            allUnivs: [],\r\n            selectedUnivName: '',\r\n            loadingUnivs: false,\r\n            univSearchKeyword: '',\r\n            univSelectedRegion: ''\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        isFormValid() {\r\n            return this.newPost.title.trim() && this.newPost.content.trim()\r\n        },\r\n\r\n        // ÊèêÂèñÊâÄÊúâÂú∞Âå∫\r\n        availableRegions() {\r\n            const regions = new Set()\r\n            this.allUnivs.forEach(u => {\r\n                const match = u.univ_name.match(\r\n                    /^(‰∏äÊµ∑|Âåó‰∫¨|Â§©Ê¥•|ÈáçÂ∫Ü|Ê±üËãè|ÊµôÊ±ü|Âπø‰∏ú|ÂõõÂ∑ù|ÊπñÂåó|Â±±‰∏ú|ÈôïË•ø|ËæΩÂÆÅ|ÊπñÂçó|Á¶èÂª∫|Ê≤≥Âçó|Ê≤≥Âåó|ÂÆâÂæΩ|ÈªëÈæôÊ±ü|ÂêâÊûó|‰∫ëÂçó|Â±±Ë•ø|Ê±üË•ø|Ë¥µÂ∑û|ÂπøË•ø|ÁîòËÇÉ|ÂÜÖËíôÂè§|Êñ∞ÁñÜ|Êµ∑Âçó|ÂÆÅÂ§è|ÈùíÊµ∑|Ë•øËóè|È¶ôÊ∏Ø|Êæ≥Èó®|Âè∞Êπæ)/\r\n                )\r\n                if (match) regions.add(match[1])\r\n            })\r\n            return Array.from(regions).sort()\r\n        },\r\n\r\n        // ËøáÊª§ÂêéÁöÑÂ≠¶Ê†°ÂàóË°®\r\n        filteredUnivsList() {\r\n            let list = this.allUnivs\r\n\r\n            // ÊåâÂú∞Âå∫Á≠õÈÄâ\r\n            if (this.univSelectedRegion) {\r\n                list = list.filter(u =>\r\n                    u.univ_name.startsWith(this.univSelectedRegion)\r\n                )\r\n            }\r\n\r\n            // ÊåâÂÖ≥ÈîÆËØçÊêúÁ¥¢\r\n            if (this.univSearchKeyword.trim()) {\r\n                const kw = this.univSearchKeyword.trim().toLowerCase()\r\n                list = list.filter(u => u.univ_name.toLowerCase().includes(kw))\r\n            }\r\n\r\n            return list\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        const q = this.$route.query.univ_id\r\n        if (q !== undefined) this.univ_id = Number(q) || 0\r\n\r\n        this.loadPosts()\r\n        this.loadUniversities()\r\n    },\r\n\r\n    methods: {\r\n        // =========================\r\n        // 1) Â∏ñÂ≠êÂàóË°®\r\n        // =========================\r\n        async loadPosts() {\r\n            this.loading = true\r\n            try {\r\n                const body = await univPostsAPI({\r\n                    univ_id: this.univ_id === 0 ? '' : this.univ_id,\r\n                    keyword: this.searchKeyword.trim()\r\n                })\r\n\r\n                // ÂêéÁ´ØÔºö{ code:200, data:[...] }\r\n                this.posts = Array.isArray(body?.data) ? body.data : []\r\n            } catch (err) {\r\n                console.error('[Posts] loadPosts failed:', err)\r\n                this.$message?.error?.('Âä†ËΩΩÂ∏ñÂ≠êÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï')\r\n            } finally {\r\n                this.loading = false\r\n            }\r\n        },\r\n\r\n        onSearch() {\r\n            this.loadPosts()\r\n        },\r\n\r\n        // =========================\r\n        // 2) ÁÇπÂáªË∑≥Â∏ñÂ≠êËØ¶ÊÉÖÔºàÊñπÊ°àAÔºâ\r\n        // Ë∑ØÁî±Ôºö/main/posts/detail/:id\r\n        // =========================\r\n        viewPostDetail(postId) {\r\n            if (!postId) {\r\n                this.$message?.error?.('Â∏ñÂ≠êIDÁº∫Â§±')\r\n                return\r\n            }\r\n            this.$router.push({\r\n                name: 'Postdetail', // ‚ö†Ô∏è Âíå router Èáå name ÂÆåÂÖ®‰∏ÄËá¥\r\n                params: { id: String(postId) }\r\n            })\r\n        },\r\n\r\n        // =========================\r\n        // 3) Â≠¶Ê†°ÂàóË°®ÔºàÁî®‰∫éÈÄâÊã©ÂÖ≥ËÅîÂ≠¶Ê†°Ôºâ\r\n        // =========================\r\n        async loadUniversities() {\r\n            this.loadingUnivs = true\r\n            try {\r\n                const res = await universitiesAPI({ page: 1, size: 1000 })\r\n                // ‰Ω†‰πãÂâçÁöÑÂÖºÂÆπÔºöres.data.list -> {id,name,logo_url}\r\n                if (res?.code === 200 && Array.isArray(res?.data?.list)) {\r\n                    this.allUnivs = res.data.list.map(u => ({\r\n                        univ_id: u.id,\r\n                        univ_name: u.name,\r\n                        logo_url: u.logo_url\r\n                    }))\r\n                } else {\r\n                    // Â¶ÇÊûúÂêéÁ´ØÁõ¥Êé•ËøîÂõûÊï∞ÁªÑÔºå‰πüÂÖºÂÆπ‰∏Ä‰∏ã\r\n                    const arr = Array.isArray(res?.data) ? res.data : []\r\n                    if (arr.length) {\r\n                        this.allUnivs = arr.map(u => ({\r\n                            univ_id: u.id ?? u.univ_id,\r\n                            univ_name: u.name ?? u.univ_name,\r\n                            logo_url: u.logo_url\r\n                        }))\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.error('[Posts] loadUniversities failed:', e)\r\n            } finally {\r\n                this.loadingUnivs = false\r\n            }\r\n        },\r\n\r\n        selectUniv(univ) {\r\n            this.newPost.univ_id = univ.univ_id\r\n            this.selectedUnivName = univ.univ_name\r\n            this.showUnivSelector = false\r\n            this.univSearchKeyword = ''\r\n            this.univSelectedRegion = ''\r\n        },\r\n\r\n        clearSelectedUniv() {\r\n            this.newPost.univ_id = ''\r\n            this.selectedUnivName = ''\r\n        },\r\n\r\n        // =========================\r\n        // 4) ÂèëÂ∏ÉÂ∏ñÂ≠êÂºπÁ™ó\r\n        // =========================\r\n        async showNewPostDialog() {\r\n            const userId = localStorage.getItem('user_id')\r\n            if (!userId) {\r\n                alert('ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçÂèëÂ∏ÉÂ∏ñÂ≠ê')\r\n                this.$router.push('/login')\r\n                return\r\n            }\r\n\r\n            // Â¶ÇÊûúÂ≠¶Ê†°ËøòÊ≤°Âä†ËΩΩÂÆåÔºåË°•Êãâ‰∏ÄÊ¨°\r\n            if (!this.allUnivs.length && !this.loadingUnivs) {\r\n                await this.loadUniversities()\r\n            }\r\n\r\n            this.showDialog = true\r\n            this.resetForm()\r\n        },\r\n\r\n        closeDialog() {\r\n            this.showDialog = false\r\n            this.showUnivSelector = false\r\n            this.resetForm()\r\n        },\r\n\r\n        resetForm() {\r\n            this.newPost = {\r\n                title: '',\r\n                content: '',\r\n                univ_id: this.univ_id > 0 ? this.univ_id : ''\r\n            }\r\n            this.selectedUnivName = ''\r\n\r\n            // Â¶ÇÊûúÂΩìÂâçÈ°µÈù¢ÊòØÊüê‰∏™Â≠¶Ê†°‰∏ãÁöÑÂ∏ñÂ≠êÔºåÈªòËÆ§ÈÄâ‰∏≠ËØ•Ê†°\r\n            if (this.univ_id > 0) {\r\n                const u = this.allUnivs.find(x => x.univ_id === this.univ_id)\r\n                if (u) {\r\n                    this.selectedUnivName = u.univ_name\r\n                    this.newPost.univ_id = u.univ_id\r\n                }\r\n            }\r\n\r\n            this.univSearchKeyword = ''\r\n            this.univSelectedRegion = ''\r\n        },\r\n\r\n        async submitPost() {\r\n            if (!this.newPost.title.trim()) return alert('ËØ∑ËæìÂÖ•Ê†áÈ¢ò')\r\n            if (!this.newPost.content.trim()) return alert('ËØ∑ËæìÂÖ•ÂÜÖÂÆπ')\r\n\r\n            this.submitting = true\r\n            try {\r\n                const user_id = localStorage.getItem('user_id') || '1'\r\n\r\n                const params = {\r\n                    user_id,\r\n                    title: this.newPost.title.trim(),\r\n                    content: this.newPost.content.trim()\r\n                }\r\n                if (this.newPost.univ_id) {\r\n                    params.univ_id = Number(this.newPost.univ_id)\r\n                }\r\n\r\n                await newPostAPI(params)\r\n\r\n                alert('ÂèëÂ∏ÉÊàêÂäüÔºÅ')\r\n                this.closeDialog()\r\n                await this.loadPosts()\r\n            } catch (err) {\r\n                console.error('ÂèëÂ∏ÉÂ§±Ë¥•:', err)\r\n                alert(err?.message || 'ÂèëÂ∏ÉÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï')\r\n            } finally {\r\n                this.submitting = false\r\n            }\r\n        },\r\n\r\n        // =========================\r\n        // 5) Â∑•ÂÖ∑ÂáΩÊï∞\r\n        // =========================\r\n        getContentPreview(content) {\r\n            if (!content) return ''\r\n            return content.length > 100\r\n                ? content.substring(0, 100) + '...'\r\n                : content\r\n        },\r\n\r\n        formatFullTime(time) {\r\n            if (!time) return ''\r\n            const date = new Date(time)\r\n            const y = date.getFullYear()\r\n            const m = String(date.getMonth() + 1).padStart(2, '0')\r\n            const d = String(date.getDate()).padStart(2, '0')\r\n            const hh = String(date.getHours()).padStart(2, '0')\r\n            const mm = String(date.getMinutes()).padStart(2, '0')\r\n            const ss = String(date.getSeconds()).padStart(2, '0')\r\n            return `${y}-${m}-${d} ${hh}:${mm}:${ss}`\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.posts-page {\r\n    min-height: 100vh;\r\n    background: #f5f5f5;\r\n    margin-top: 60px;\r\n}\r\n\r\n/* È°∂ÈÉ®ÂØºËà™ */\r\n.header {\r\n    background: #fefefe;\r\n    padding: 20px 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.title {\r\n    font-size: 24px;\r\n    font-weight: 600;\r\n    color: #333;\r\n    margin: 0;\r\n}\r\n\r\n.header-actions {\r\n    display: flex;\r\n    gap: 12px;\r\n    align-items: center;\r\n}\r\n\r\n.search-input {\r\n    padding: 10px 16px;\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 4px;\r\n    width: 280px;\r\n    font-size: 14px;\r\n    outline: none;\r\n    transition: border-color 0.3s;\r\n}\r\n\r\n.search-input:focus {\r\n    border-color: #1890ff;\r\n}\r\n\r\n.btn-search {\r\n    padding: 10px 20px;\r\n    background: #1890ff;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    transition: background 0.3s;\r\n}\r\n\r\n.btn-search:hover {\r\n    background: #40a9ff;\r\n}\r\n\r\n.btn-new {\r\n    padding: 10px 20px;\r\n    background: #1890ff;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: background 0.3s;\r\n}\r\n\r\n.btn-new:hover {\r\n    background: #40a9ff;\r\n}\r\n\r\n/* Â∏ñÂ≠êÂÆπÂô® */\r\n.posts-container {\r\n    max-width: 1400px;\r\n    margin: 0 auto;\r\n    padding: 24px 40px;\r\n}\r\n\r\n/* Â∏ñÂ≠êÈ°π */\r\n.post-item {\r\n    background: white;\r\n    padding: 24px 28px;\r\n    margin-bottom: 16px;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n}\r\n\r\n.post-item:hover {\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n    transform: translateY(-2px);\r\n}\r\n\r\n.post-main {\r\n    flex: 1;\r\n}\r\n\r\n.post-title {\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    color: #333;\r\n    margin: 0 0 8px 0;\r\n}\r\n\r\n.post-preview {\r\n    font-size: 14px;\r\n    color: #666;\r\n    margin: 8px 0 12px 0;\r\n    line-height: 1.5;\r\n}\r\n\r\n.post-meta {\r\n    display: flex;\r\n    gap: 20px;\r\n    align-items: center;\r\n    font-size: 14px;\r\n    color: #999;\r\n}\r\n\r\n.author {\r\n    color: #666;\r\n    font-weight: 500;\r\n}\r\n\r\n.meta-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n}\r\n\r\n.icon-view,\r\n.icon-comment {\r\n    font-style: normal;\r\n}\r\n\r\n.post-time {\r\n    color: #999;\r\n    font-size: 14px;\r\n    white-space: nowrap;\r\n    margin-left: 20px;\r\n}\r\n\r\n/* Á©∫Áä∂ÊÄÅ */\r\n.empty {\r\n    text-align: center;\r\n    padding: 80px 20px;\r\n    color: #999;\r\n}\r\n\r\n.empty-icon {\r\n    font-size: 64px;\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.empty p {\r\n    font-size: 16px;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.btn-new-empty {\r\n    padding: 12px 24px;\r\n    background: #1890ff;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    transition: background 0.3s;\r\n}\r\n\r\n.btn-new-empty:hover {\r\n    background: #40a9ff;\r\n}\r\n\r\n/* Âä†ËΩΩÁä∂ÊÄÅ */\r\n.loading {\r\n    text-align: center;\r\n    padding: 60px 20px;\r\n    color: #999;\r\n}\r\n\r\n.loading-spinner {\r\n    width: 40px;\r\n    height: 40px;\r\n    margin: 0 auto 16px;\r\n    border: 3px solid #f3f3f3;\r\n    border-top: 3px solid #1890ff;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n    0% {\r\n        transform: rotate(0deg);\r\n    }\r\n    100% {\r\n        transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n/* ÂºπÁ™óÊ†∑Âºè */\r\n.modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 1000;\r\n    animation: fadeIn 0.3s;\r\n}\r\n\r\n@keyframes fadeIn {\r\n    from {\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n.modal-box {\r\n    background: white;\r\n    border-radius: 8px;\r\n    width: 90%;\r\n    max-width: 600px;\r\n    max-height: 90vh;\r\n    overflow: auto;\r\n    animation: slideIn 0.3s;\r\n}\r\n\r\n@keyframes slideIn {\r\n    from {\r\n        transform: translateY(-50px);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateY(0);\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n.modal-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 20px 24px;\r\n    border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.modal-header h3 {\r\n    margin: 0;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.btn-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 28px;\r\n    color: #999;\r\n    cursor: pointer;\r\n    padding: 0;\r\n    width: 28px;\r\n    height: 28px;\r\n    line-height: 1;\r\n    transition: color 0.3s;\r\n}\r\n\r\n.btn-close:hover {\r\n    color: #333;\r\n}\r\n\r\n.modal-body {\r\n    padding: 24px;\r\n}\r\n\r\n.form-item {\r\n    margin-bottom: 20px;\r\n    position: relative;\r\n}\r\n\r\n.form-item label {\r\n    display: block;\r\n    margin-bottom: 8px;\r\n    color: #333;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n}\r\n\r\n.required {\r\n    color: #ff4d4f;\r\n}\r\n\r\n.form-item input,\r\n.form-item textarea {\r\n    width: 100%;\r\n    padding: 10px 12px;\r\n    border: 1px solid #d9d9d9;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    box-sizing: border-box;\r\n    font-family: inherit;\r\n    transition: border-color 0.3s;\r\n}\r\n\r\n.form-item input:focus,\r\n.form-item textarea:focus {\r\n    outline: none;\r\n    border-color: #1890ff;\r\n}\r\n\r\n.form-item textarea {\r\n    resize: vertical;\r\n}\r\n\r\n.char-count {\r\n    position: absolute;\r\n    right: 8px;\r\n    bottom: 8px;\r\n    font-size: 12px;\r\n    color: #999;\r\n}\r\n\r\n.modal-footer {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 12px;\r\n    padding: 16px 24px;\r\n    border-top: 1px solid #f0f0f0;\r\n}\r\n\r\n.btn-cancel,\r\n.btn-submit {\r\n    padding: 8px 20px;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    border: none;\r\n    transition: all 0.3s;\r\n}\r\n\r\n.btn-cancel {\r\n    background: #f5f5f5;\r\n    color: #666;\r\n}\r\n\r\n.btn-cancel:hover {\r\n    background: #e8e8e8;\r\n}\r\n\r\n.btn-submit {\r\n    background: #1890ff;\r\n    color: white;\r\n}\r\n\r\n.btn-submit:hover:not(:disabled) {\r\n    background: #40a9ff;\r\n}\r\n\r\n.btn-submit:disabled {\r\n    opacity: 0.6;\r\n    cursor: not-allowed;\r\n}\r\n\r\n.univ-modal-overlay {\r\n    position: fixed;\r\n    inset: 0;\r\n    background: rgba(0, 0, 0, 0.35);\r\n    z-index: 1100; /* ÊØî modal-overlay(1000) È´ò */\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.univ-modal {\r\n    width: 90%;\r\n    max-width: 640px;\r\n    max-height: 80vh;\r\n    background: #fff;\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.18);\r\n}\r\n\r\n.univ-modal-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 14px 16px;\r\n    border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.univ-modal-title {\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n.univ-modal-close {\r\n    border: none;\r\n    background: transparent;\r\n    font-size: 24px;\r\n    cursor: pointer;\r\n    color: #999;\r\n}\r\n\r\n.univ-modal-tools {\r\n    display: flex;\r\n    gap: 10px;\r\n    padding: 12px 16px;\r\n    border-bottom: 1px solid #f6f6f6;\r\n}\r\n\r\n.univ-search {\r\n    flex: 1;\r\n    padding: 10px 12px;\r\n    border: 1px solid #e5e5e5;\r\n    border-radius: 6px;\r\n    outline: none;\r\n}\r\n.univ-region {\r\n    width: 140px;\r\n    padding: 10px 12px;\r\n    border: 1px solid #e5e5e5;\r\n    border-radius: 6px;\r\n    outline: none;\r\n    background: #fff;\r\n}\r\n\r\n.univ-modal-list {\r\n    padding: 8px 0;\r\n    overflow: auto;\r\n    max-height: calc(80vh - 120px);\r\n}\r\n\r\n.univ-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n    padding: 10px 16px;\r\n    cursor: pointer;\r\n}\r\n.univ-item:hover {\r\n    background: #f5f9ff;\r\n}\r\n\r\n.univ-logo {\r\n    width: 26px;\r\n    height: 26px;\r\n    border-radius: 4px;\r\n    object-fit: cover;\r\n}\r\n.univ-name {\r\n    color: #333;\r\n}\r\n\r\n.univ-loading,\r\n.univ-empty {\r\n    padding: 18px 16px;\r\n    color: #999;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}