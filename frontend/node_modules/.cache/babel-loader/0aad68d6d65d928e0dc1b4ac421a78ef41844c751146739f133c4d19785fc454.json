{"ast":null,"code":"// src/api/http.js\nimport axios from 'axios';\nconst http = axios.create({\n  baseURL: '/api',\n  // 走 vue proxy: /api -> /api/v1\n  timeout: 15000\n  // ✅ 不要在这里写死 Content-Type\n});\n\n// ✅ 请求拦截：FormData 放行；非 FormData 才设 JSON\nhttp.interceptors.request.use(config => {\n  const isFormData = config.data instanceof FormData;\n  if (isFormData) {\n    // 让浏览器自动生成 multipart boundary\n    if (config.headers) {\n      delete config.headers['Content-Type'];\n      delete config.headers['content-type'];\n    }\n  } else {\n    config.headers = config.headers || {};\n    // 只对普通 JSON 请求设置\n    if (!config.headers['Content-Type'] && !config.headers['content-type']) {\n      config.headers['Content-Type'] = 'application/json';\n    }\n  }\n  return config;\n}, err => Promise.reject(err));\n\n// ✅ 响应拦截：保留错误里的 response，别丢 status/data\nhttp.interceptors.response.use(res => {\n  const body = res.data;\n\n  // 非标准 {code,...} 直接原样返回\n  if (!body || typeof body !== 'object' || !('code' in body)) return body;\n  if (body.code === 200) return body;\n\n  // ❗关键：把 response 挂回 error，方便你在页面里拿到 status/data\n  const e = new Error(body.msg || '请求失败');\n  e.response = res;\n  return Promise.reject(e);\n}, err => Promise.reject(err));\nexport default http;","map":{"version":3,"names":["axios","http","create","baseURL","timeout","interceptors","request","use","config","isFormData","data","FormData","headers","err","Promise","reject","response","res","body","code","e","Error","msg"],"sources":["D:/Projects/Service-Outsourcing-Innovation-and-Entrepreneurship-Competition/frontend/src/api/http.js"],"sourcesContent":["// src/api/http.js\r\nimport axios from 'axios'\r\n\r\nconst http = axios.create({\r\n    baseURL: '/api', // 走 vue proxy: /api -> /api/v1\r\n    timeout: 15000\r\n    // ✅ 不要在这里写死 Content-Type\r\n})\r\n\r\n// ✅ 请求拦截：FormData 放行；非 FormData 才设 JSON\r\nhttp.interceptors.request.use(\r\n    config => {\r\n        const isFormData = config.data instanceof FormData\r\n\r\n        if (isFormData) {\r\n            // 让浏览器自动生成 multipart boundary\r\n            if (config.headers) {\r\n                delete config.headers['Content-Type']\r\n                delete config.headers['content-type']\r\n            }\r\n        } else {\r\n            config.headers = config.headers || {}\r\n            // 只对普通 JSON 请求设置\r\n            if (\r\n                !config.headers['Content-Type'] &&\r\n                !config.headers['content-type']\r\n            ) {\r\n                config.headers['Content-Type'] = 'application/json'\r\n            }\r\n        }\r\n\r\n        return config\r\n    },\r\n    err => Promise.reject(err)\r\n)\r\n\r\n// ✅ 响应拦截：保留错误里的 response，别丢 status/data\r\nhttp.interceptors.response.use(\r\n    res => {\r\n        const body = res.data\r\n\r\n        // 非标准 {code,...} 直接原样返回\r\n        if (!body || typeof body !== 'object' || !('code' in body)) return body\r\n\r\n        if (body.code === 200) return body\r\n\r\n        // ❗关键：把 response 挂回 error，方便你在页面里拿到 status/data\r\n        const e = new Error(body.msg || '请求失败')\r\n        e.response = res\r\n        return Promise.reject(e)\r\n    },\r\n    err => Promise.reject(err)\r\n)\r\n\r\nexport default http\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAAC;EACtBC,OAAO,EAAE,MAAM;EAAE;EACjBC,OAAO,EAAE;EACT;AACJ,CAAC,CAAC;;AAEF;AACAH,IAAI,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAI;EACN,MAAMC,UAAU,GAAGD,MAAM,CAACE,IAAI,YAAYC,QAAQ;EAElD,IAAIF,UAAU,EAAE;IACZ;IACA,IAAID,MAAM,CAACI,OAAO,EAAE;MAChB,OAAOJ,MAAM,CAACI,OAAO,CAAC,cAAc,CAAC;MACrC,OAAOJ,MAAM,CAACI,OAAO,CAAC,cAAc,CAAC;IACzC;EACJ,CAAC,MAAM;IACHJ,MAAM,CAACI,OAAO,GAAGJ,MAAM,CAACI,OAAO,IAAI,CAAC,CAAC;IACrC;IACA,IACI,CAACJ,MAAM,CAACI,OAAO,CAAC,cAAc,CAAC,IAC/B,CAACJ,MAAM,CAACI,OAAO,CAAC,cAAc,CAAC,EACjC;MACEJ,MAAM,CAACI,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;IACvD;EACJ;EAEA,OAAOJ,MAAM;AACjB,CAAC,EACDK,GAAG,IAAIC,OAAO,CAACC,MAAM,CAACF,GAAG,CAC7B,CAAC;;AAED;AACAZ,IAAI,CAACI,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC1BU,GAAG,IAAI;EACH,MAAMC,IAAI,GAAGD,GAAG,CAACP,IAAI;;EAErB;EACA,IAAI,CAACQ,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAI,EAAE,MAAM,IAAIA,IAAI,CAAC,EAAE,OAAOA,IAAI;EAEvE,IAAIA,IAAI,CAACC,IAAI,KAAK,GAAG,EAAE,OAAOD,IAAI;;EAElC;EACA,MAAME,CAAC,GAAG,IAAIC,KAAK,CAACH,IAAI,CAACI,GAAG,IAAI,MAAM,CAAC;EACvCF,CAAC,CAACJ,QAAQ,GAAGC,GAAG;EAChB,OAAOH,OAAO,CAACC,MAAM,CAACK,CAAC,CAAC;AAC5B,CAAC,EACDP,GAAG,IAAIC,OAAO,CAACC,MAAM,CAACF,GAAG,CAC7B,CAAC;AAED,eAAeZ,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}