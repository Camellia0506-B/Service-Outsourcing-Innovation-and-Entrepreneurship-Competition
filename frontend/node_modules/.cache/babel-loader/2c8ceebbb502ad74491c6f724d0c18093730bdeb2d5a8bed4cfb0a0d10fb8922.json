{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.some.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar useOption = require('./useOption.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar index$1 = require('../../../hooks/use-id/index.js');\nconst _sfc_main = vue.defineComponent({\n  name: \"ElOption\",\n  componentName: \"ElOption\",\n  props: {\n    value: {\n      required: true,\n      type: [String, Number, Boolean, Object]\n    },\n    label: [String, Number],\n    created: Boolean,\n    disabled: Boolean\n  },\n  setup(props) {\n    const ns = index.useNamespace(\"select\");\n    const id = index$1.useId();\n    const containerKls = vue.computed(() => [ns.be(\"dropdown\", \"item\"), ns.is(\"disabled\", vue.unref(isDisabled)), ns.is(\"selected\", vue.unref(itemSelected)), ns.is(\"hovering\", vue.unref(hover))]);\n    const states = vue.reactive({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false\n    });\n    const {\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption\n    } = useOption.useOption(props, states);\n    const {\n      visible,\n      hover\n    } = vue.toRefs(states);\n    const vm = vue.getCurrentInstance().proxy;\n    select.onOptionCreate(vm);\n    vue.onBeforeUnmount(() => {\n      const key = vm.value;\n      const {\n        selected: selectedOptions\n      } = select.states;\n      const doesSelected = selectedOptions.some(item => {\n        return item.value === vm.value;\n      });\n      vue.nextTick(() => {\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions.delete(key);\n        }\n      });\n      select.onOptionDestroy(key, vm);\n    });\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm);\n      }\n    }\n    return {\n      ns,\n      id,\n      containerKls,\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption,\n      visible,\n      hover,\n      selectOptionClick,\n      states\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return vue.withDirectives((vue.openBlock(), vue.createElementBlock(\"li\", {\n    id: _ctx.id,\n    class: vue.normalizeClass(_ctx.containerKls),\n    role: \"option\",\n    \"aria-disabled\": _ctx.isDisabled || void 0,\n    \"aria-selected\": _ctx.itemSelected,\n    onMousemove: _ctx.hoverItem,\n    onClick: vue.withModifiers(_ctx.selectOptionClick, [\"stop\"])\n  }, [vue.renderSlot(_ctx.$slots, \"default\", {}, () => [vue.createElementVNode(\"span\", null, vue.toDisplayString(_ctx.currentLabel), 1)])], 42, [\"id\", \"aria-disabled\", \"aria-selected\", \"onMousemove\", \"onClick\"])), [[vue.vShow, _ctx.visible]]);\n}\nvar Option = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"option.vue\"]]);\nexports[\"default\"] = Option;","map":{"version":3,"names":["_sfc_main","vue","defineComponent","name","componentName","props","value","required","type","String","Number","Boolean","Object","label","created","disabled","setup","ns","index","useNamespace","id","index$1","useId","containerKls","computed","be","is","unref","isDisabled","itemSelected","hover","states","reactive","groupDisabled","visible","currentLabel","select","hoverItem","updateOption","useOption","toRefs","vm","getCurrentInstance","proxy","onOptionCreate","onBeforeUnmount","key","selected","selectedOptions","doesSelected","some","item","nextTick","cachedOptions","get","delete","onOptionDestroy","selectOptionClick","handleOptionSelect","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","withDirectives","openBlock","createElementBlock","class","normalizeClass","role","onMousemove","createElementVNode","toDisplayString","vShow","Option","pluginVue_exportHelper"],"sources":["../../../../../../packages/components/select/src/option.vue"],"sourcesContent":["<template>\n  <li\n    v-show=\"visible\"\n    :id=\"id\"\n    :class=\"containerKls\"\n    role=\"option\"\n    :aria-disabled=\"isDisabled || undefined\"\n    :aria-selected=\"itemSelected\"\n    @mousemove=\"hoverItem\"\n    @click.stop=\"selectOptionClick\"\n  >\n    <slot>\n      <span>{{ currentLabel }}</span>\n    </slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\n// @ts-nocheck\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  nextTick,\n  onBeforeUnmount,\n  reactive,\n  toRefs,\n  unref,\n} from 'vue'\nimport { useId, useNamespace } from '@element-plus/hooks'\nimport { useOption } from './useOption'\nimport type { SelectOptionProxy } from './token'\n\nexport default defineComponent({\n  name: 'ElOption',\n  componentName: 'ElOption',\n\n  props: {\n    /**\n     * @description value of option\n     */\n    value: {\n      required: true,\n      type: [String, Number, Boolean, Object],\n    },\n    /**\n     * @description label of option, same as `value` if omitted\n     */\n    label: [String, Number],\n    created: Boolean,\n    /**\n     * @description whether option is disabled\n     */\n    disabled: Boolean,\n  },\n\n  setup(props) {\n    const ns = useNamespace('select')\n    const id = useId()\n\n    const containerKls = computed(() => [\n      ns.be('dropdown', 'item'),\n      ns.is('disabled', unref(isDisabled)),\n      ns.is('selected', unref(itemSelected)),\n      ns.is('hovering', unref(hover)),\n    ])\n\n    const states = reactive({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false,\n    })\n\n    const {\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption,\n    } = useOption(props, states)\n\n    const { visible, hover } = toRefs(states)\n\n    const vm = getCurrentInstance().proxy as unknown as SelectOptionProxy\n\n    select.onOptionCreate(vm)\n\n    onBeforeUnmount(() => {\n      const key = vm.value\n      const { selected: selectedOptions } = select.states\n      const doesSelected = selectedOptions.some((item) => {\n        return item.value === vm.value\n      })\n      // if option is not selected, remove it from cache\n      nextTick(() => {\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions.delete(key)\n        }\n      })\n      select.onOptionDestroy(key, vm)\n    })\n\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm)\n      }\n    }\n\n    return {\n      ns,\n      id,\n      containerKls,\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption,\n      visible,\n      hover,\n      selectOptionClick,\n      states,\n    }\n  },\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}