{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { univInfoAPI, univNoticesAPI, univPostsAPI } from '@/api/universities';\nimport { resourceListAPI, resourceUploadAPI } from '@/api/resources';\nimport { postDetailAPI, newPostAPI, newCommentAPI } from '@/api/posts';\nexport default {\n  name: 'SchoolDetail',\n  data() {\n    return {\n      activeTab: 'notice',\n      tabs: [{\n        id: 'notice',\n        name: '招生通知'\n      }, {\n        id: 'community',\n        name: '经验社区'\n      }, {\n        id: 'resources',\n        name: '资料共享'\n      }],\n      isLoading: false,\n      errorMsg: '',\n      univId: null,\n      // ✅ 从登录信息里拿（不要写死 5001）\n      userId: null,\n      school: {\n        id: null,\n        name: '',\n        logo_url: '',\n        tags: [],\n        intro: ''\n      },\n      filters: {\n        college: '',\n        type: '',\n        status: ''\n      },\n      notices: [],\n      postKeyword: '',\n      posts: [],\n      isPostsLoading: false,\n      // ✅ 不再用弹窗详情（改为跳转）\n      showPostModal: false,\n      postDetail: null,\n      isPostDetailLoading: false,\n      commentInput: '',\n      showNewPostModal: false,\n      newPostForm: {\n        title: '',\n        content: ''\n      },\n      files: [],\n      isFilesLoading: false\n    };\n  },\n  computed: {\n    deptOptions() {\n      const set = new Set();\n      (this.notices || []).forEach(n => n?.dept_name && set.add(n.dept_name));\n      return Array.from(set);\n    },\n    filteredNotices() {\n      let list = this.notices || [];\n      if (this.filters.college) {\n        list = list.filter(n => (n.dept_name || '') === this.filters.college);\n      }\n      return list;\n    }\n  },\n  async mounted() {\n    this.resolveUnivId();\n    this.resolveUserId();\n    if (!this.userId) {\n      this.errorMsg = '未登录或登录信息缺失：请先登录以获取 user_id';\n      // 你也可以选择直接跳转登录\n      // this.$router.push('/login')\n      return;\n    }\n    if (!this.univId || Number.isNaN(this.univId)) {\n      this.errorMsg = '缺少 univ_id：请检查 School.vue 跳转是否传入 params.id 或 query.univ_id，以及路由是否支持 /school/detail/:id';\n      return;\n    }\n    await this.refreshAll();\n  },\n  methods: {\n    // ✅ 从 localStorage 读取 user_id（登录接口是唯一合法来源）\n    resolveUserId() {\n      const v = localStorage.getItem('user_id');\n      const id = v ? Number(v) : null;\n      this.userId = Number.isFinite(id) && id > 0 ? id : null;\n    },\n    resolveUnivId() {\n      const raw = this.$route?.params?.univ_id ?? this.$route?.params?.id ?? this.$route?.query?.univ_id ?? this.$route?.query?.id;\n      this.univId = raw !== undefined && raw !== null && raw !== '' ? Number(raw) : null;\n    },\n    unwrap(res) {\n      return res?.data ?? res;\n    },\n    isOk(payload) {\n      if (payload == null) return false;\n      if (Array.isArray(payload)) return true;\n      if (typeof payload === 'object' && !('code' in payload)) return true;\n      return payload.code === 200;\n    },\n    // ✅ 页面返回按钮：优先回退，否则回院校列表（你的路由是 /main/school）\n    goBack() {\n      if (window.history.length > 1) this.$router.back();else this.$router.push('/main/school');\n    },\n    async refreshAll() {\n      this.isLoading = true;\n      this.errorMsg = '';\n      try {\n        await this.fetchSchoolInfo();\n        await this.fetchNotices();\n        await this.fetchPosts();\n        await this.fetchResources();\n      } catch (e) {\n        console.error('[SchoolDetail] refreshAll error:', e);\n        this.errorMsg = '请求失败：请检查后端是否启动、baseURL/代理、跨域、接口路径是否一致';\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async fetchSchoolInfo() {\n      const res = await univInfoAPI(this.univId);\n      const payload = this.unwrap(res);\n      if (!this.isOk(payload)) return;\n      const info = payload?.data ?? payload;\n      this.school = {\n        id: info.id ?? this.univId,\n        name: info.name ?? '',\n        logo_url: info.logo_url ?? '',\n        tags: Array.isArray(info.tags) ? info.tags : typeof info.tags === 'string' ? info.tags.split(',').map(s => s.trim()).filter(Boolean) : [],\n        intro: info.intro ?? info.description ?? info.brief ?? ''\n      };\n    },\n    async fetchNotices() {\n      const res = await univNoticesAPI(this.univId);\n      const payload = this.unwrap(res);\n      const raw = Array.isArray(payload) ? payload : payload?.data ?? payload?.notices ?? [];\n      const list = Array.isArray(raw) ? raw : [];\n      this.notices = list.map(x => ({\n        id: x.id,\n        dept_name: x.dept_name,\n        tag: x.dept_name,\n        tagColor: '#E0E7FF',\n        title: x.title,\n        deadline: x.end_date,\n        source_link: x.source_link,\n        status: this.calcNoticeStatus(x.end_date)\n      }));\n    },\n    calcNoticeStatus(endDateStr) {\n      if (!endDateStr) return 'ended';\n      const end = new Date(endDateStr + ' 23:59:59');\n      return new Date() <= end ? 'ongoing' : 'ended';\n    },\n    // ✅ 保留一个版本，删掉你原来的重复 openNoticeDetail\n    openNoticeDetail(notice) {\n      let url = (notice?.source_link || '').trim();\n      if (!url) return;\n      if (url.startsWith('//')) url = 'https:' + url;\n      if (/^https?:$/i.test(url)) return;\n      if (!/^https?:\\/\\//i.test(url)) url = 'https://' + url;\n      try {\n        // eslint-disable-next-line no-new\n        new URL(url);\n        window.open(url, '_blank');\n      } catch (e) {\n        console.warn('[SchoolDetail] invalid URL:', url, notice, e);\n      }\n    },\n    async fetchPosts() {\n      this.isPostsLoading = true;\n      try {\n        const res = await univPostsAPI({\n          univ_id: this.univId,\n          keyword: this.postKeyword\n        });\n        const payload = this.unwrap(res);\n        if (!this.isOk(payload)) {\n          this.posts = [];\n          return;\n        }\n        const list = Array.isArray(payload) ? payload : payload?.data ?? [];\n        this.posts = (Array.isArray(list) ? list : []).map(p => ({\n          id: p.id,\n          title: p.title,\n          preview: (p.content || '').slice(0, 60) + ((p.content || '').length > 60 ? '...' : ''),\n          author: p.author_nickname,\n          views: p.view_count,\n          replies: p.reply_count,\n          time: p.created_at\n        }));\n      } finally {\n        this.isPostsLoading = false;\n      }\n    },\n    // ✅ 经验社区：点击跳转到帖子详情页（方案 A）\n    goPostDetail(postId) {\n      if (!postId) return;\n      this.$router.push({\n        name: 'Postdetail',\n        params: {\n          id: String(postId)\n        }\n      });\n    },\n    // ✅ 如果你模板里还在用 openPostDetail(post.id)，这里做个兼容：直接跳转\n    openPostDetail(postId) {\n      this.goPostDetail(postId);\n    },\n    async fetchResources() {\n      this.isFilesLoading = true;\n      try {\n        const res = await resourceListAPI(this.univId);\n        const payload = this.unwrap(res);\n        if (!this.isOk(payload)) {\n          this.files = [];\n          return;\n        }\n        const list = Array.isArray(payload) ? payload : payload?.data ?? [];\n        this.files = (Array.isArray(list) ? list : []).map((f, idx) => {\n          const ext = (f.file_name || '').split('.').pop()?.toLowerCase();\n          return {\n            id: f.id ?? `${idx}-${f.file_name}`,\n            name: f.file_name,\n            size: f.file_size ?? '-',\n            uploader: f.user_name ?? f.user_id ?? '-',\n            type: ext === 'pdf' ? 'pdf' : 'doc',\n            file_url: f.file_url,\n            upload_time: f.created_at ?? f.upload_time ?? '-'\n          };\n        });\n      } finally {\n        this.isFilesLoading = false;\n      }\n    },\n    openNewPost() {\n      this.showNewPostModal = true;\n      this.newPostForm = {\n        title: '',\n        content: ''\n      };\n    },\n    async submitNewPost() {\n      const title = this.newPostForm.title.trim();\n      const content = this.newPostForm.content.trim();\n      if (!title || !content) return;\n      try {\n        await newPostAPI({\n          univ_id: this.univId,\n          user_id: this.userId,\n          title,\n          content\n        });\n        this.showNewPostModal = false;\n        await this.fetchPosts();\n      } catch (e) {\n        console.error('[SchoolDetail] newPost failed:', e);\n        this.$message?.error?.(e?.message || '发布失败');\n      }\n    },\n    // ⚠️ 由于我们改成“跳转详情页评论”，这里保留但一般用不到\n    async submitComment() {\n      const content = this.commentInput.trim();\n      const postId = this.postDetail?.post?.id;\n      if (!content || !postId) return;\n      try {\n        await newCommentAPI({\n          post_id: postId,\n          user_id: this.userId,\n          content\n        });\n        this.commentInput = '';\n        // 重新拉取弹窗详情（如果你还保留弹窗）\n        await this.openPostDetail(postId);\n      } catch (e) {\n        console.error('[SchoolDetail] comment failed:', e);\n        this.$message?.error?.(e?.message || '评论失败');\n      }\n    },\n    downloadFile(file) {\n      if (!file?.file_url) return;\n      window.open(file.file_url, '_blank');\n    },\n    triggerUpload() {\n      this.$refs.fileInput?.click();\n    },\n    async onPickFile(e) {\n      const file = e?.target?.files?.[0];\n      e.target.value = '';\n      if (!file) return;\n      if (!this.userId) {\n        this.$message?.error?.('未登录，无法上传');\n        return;\n      }\n      try {\n        this.isFilesLoading = true;\n        await resourceUploadAPI({\n          univ_id: this.univId,\n          user_id: this.userId,\n          file,\n          file_name: file.name\n        });\n        await this.fetchResources();\n      } catch (err) {\n        console.error('[SchoolDetail] upload failed:', err);\n        this.errorMsg = err?.response?.data?.message || err?.message || '上传失败';\n      } finally {\n        this.isFilesLoading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["univInfoAPI","univNoticesAPI","univPostsAPI","resourceListAPI","resourceUploadAPI","postDetailAPI","newPostAPI","newCommentAPI","name","data","activeTab","tabs","id","isLoading","errorMsg","univId","userId","school","logo_url","tags","intro","filters","college","type","status","notices","postKeyword","posts","isPostsLoading","showPostModal","postDetail","isPostDetailLoading","commentInput","showNewPostModal","newPostForm","title","content","files","isFilesLoading","computed","deptOptions","set","Set","forEach","n","dept_name","add","Array","from","filteredNotices","list","filter","mounted","resolveUnivId","resolveUserId","Number","isNaN","refreshAll","methods","v","localStorage","getItem","isFinite","raw","$route","params","univ_id","query","undefined","unwrap","res","isOk","payload","isArray","code","goBack","window","history","length","$router","back","push","fetchSchoolInfo","fetchNotices","fetchPosts","fetchResources","e","console","error","info","split","map","s","trim","Boolean","description","brief","x","tag","tagColor","deadline","end_date","source_link","calcNoticeStatus","endDateStr","end","Date","openNoticeDetail","notice","url","startsWith","test","URL","open","warn","keyword","p","preview","slice","author","author_nickname","views","view_count","replies","reply_count","time","created_at","goPostDetail","postId","String","openPostDetail","f","idx","ext","file_name","pop","toLowerCase","size","file_size","uploader","user_name","user_id","file_url","upload_time","openNewPost","submitNewPost","$message","message","submitComment","post","post_id","downloadFile","file","triggerUpload","$refs","fileInput","click","onPickFile","target","value","err","response"],"sources":["D:\\Projects\\Service-Outsourcing-Innovation-and-Entrepreneurship-Competition\\frontend\\src\\views\\SchoolDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"school-detail\">\r\n        <!-- 返回按钮 -->\r\n        <div class=\"back-btn\" @click=\"goBack\">\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                    d=\"M19 12H5M5 12L12 19M5 12L12 5\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                />\r\n            </svg>\r\n            <span>返回院校列表</span>\r\n        </div>\r\n\r\n        <!-- 顶部加载/错误提示 -->\r\n        <div v-if=\"isLoading\" style=\"padding: 10px; color: #666\">加载中...</div>\r\n        <div v-if=\"errorMsg\" style=\"padding: 10px; color: #e11d48\">\r\n            {{ errorMsg }}\r\n        </div>\r\n\r\n        <!-- 学校信息卡片 -->\r\n        <div class=\"school-info-card\">\r\n            <div class=\"school-avatar-large\">\r\n                <img\r\n                    v-if=\"school?.logo_url\"\r\n                    :src=\"school.logo_url\"\r\n                    :alt=\"school?.name || 'logo'\"\r\n                    class=\"school-logo-large\"\r\n                    @error=\"school.logo_url = ''\"\r\n                />\r\n                <span v-else>\r\n                    {{ (school?.name || '院').slice(0, 1) }}\r\n                </span>\r\n            </div>\r\n\r\n            <div class=\"school-main-info\">\r\n                <h1 class=\"school-name\">\r\n                    {{ school?.name || '加载中...' }}\r\n                </h1>\r\n\r\n                <div class=\"school-tags\">\r\n                    <span\r\n                        class=\"tag\"\r\n                        v-for=\"t in school?.tags || []\"\r\n                        :key=\"t\"\r\n                        >{{ t }}</span\r\n                    >\r\n                    <span\r\n                        class=\"tag\"\r\n                        v-if=\"!school?.tags || school.tags.length === 0\"\r\n                        >暂无标签</span\r\n                    >\r\n                </div>\r\n\r\n                <p class=\"school-description\">\r\n                    {{ school?.intro || '暂无简介/正在加载...' }}\r\n                </p>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 标签页导航 -->\r\n        <div class=\"tabs-container\">\r\n            <div class=\"tabs-nav\">\r\n                <button\r\n                    v-for=\"tab in tabs\"\r\n                    :key=\"tab.id\"\r\n                    :class=\"['tab-btn', { active: activeTab === tab.id }]\"\r\n                    @click=\"activeTab = tab.id\"\r\n                >\r\n                    {{ tab.name }}\r\n                </button>\r\n            </div>\r\n\r\n            <!-- 标签页内容 -->\r\n            <div class=\"tab-content\">\r\n                <!-- 招生通知 -->\r\n                <div v-if=\"activeTab === 'notice'\" class=\"notice-content\">\r\n                    <div class=\"filter-row\">\r\n                        <select class=\"filter-select\" v-model=\"filters.college\">\r\n                            <option value=\"\">所有学院</option>\r\n                            <!-- 动态学院列表（从 notices 里抽取） -->\r\n                            <option\r\n                                v-for=\"dept in deptOptions\"\r\n                                :key=\"dept\"\r\n                                :value=\"dept\"\r\n                            >\r\n                                {{ dept }}\r\n                            </option>\r\n                        </select>\r\n\r\n                        <!-- 这两个目前后端没字段，先保留 UI 不做真实筛选 -->\r\n                        <select class=\"filter-select\" v-model=\"filters.type\">\r\n                            <option value=\"\">所有类型</option>\r\n                            <option value=\"summer\">夏令营</option>\r\n                            <option value=\"recommend\">预推免</option>\r\n                        </select>\r\n                        <select class=\"filter-select\" v-model=\"filters.status\">\r\n                            <option value=\"\">所有形式</option>\r\n                            <option value=\"online\">线上</option>\r\n                            <option value=\"offline\">线下</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"notice-list\">\r\n                        <div\r\n                            v-for=\"notice in filteredNotices\"\r\n                            :key=\"notice.id\"\r\n                            class=\"notice-item\"\r\n                            role=\"button\"\r\n                            tabindex=\"0\"\r\n                            @click=\"openNoticeDetail(notice)\"\r\n                            @keydown.enter=\"openNoticeDetail(notice)\"\r\n                        >\r\n                            <div class=\"notice-header\">\r\n                                <span\r\n                                    class=\"notice-tag\"\r\n                                    :style=\"{ background: notice.tagColor }\"\r\n                                >\r\n                                    {{ notice.tag }}\r\n                                </span>\r\n                                <h3 class=\"notice-title\">{{ notice.title }}</h3>\r\n                            </div>\r\n\r\n                            <div class=\"notice-meta\">\r\n                                <span class=\"meta-item\">\r\n                                    <svg\r\n                                        width=\"16\"\r\n                                        height=\"16\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                    >\r\n                                        <path\r\n                                            d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                        />\r\n                                    </svg>\r\n                                    {{ notice.dept_name || '通知' }}\r\n                                </span>\r\n                                <span class=\"meta-item\">\r\n                                    <svg\r\n                                        width=\"16\"\r\n                                        height=\"16\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                    >\r\n                                        <circle\r\n                                            cx=\"12\"\r\n                                            cy=\"12\"\r\n                                            r=\"10\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                        />\r\n                                        <path\r\n                                            d=\"M12 6v6l4 2\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                            stroke-linecap=\"round\"\r\n                                        />\r\n                                    </svg>\r\n                                    截止: {{ notice.deadline }}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div class=\"notice-actions\">\r\n                                <span :class=\"['status-badge', notice.status]\">\r\n                                    {{\r\n                                        notice.status === 'ongoing'\r\n                                            ? '进行中'\r\n                                            : '已结束'\r\n                                    }}\r\n                                </span>\r\n\r\n                                <!-- 按钮仍然保留，但阻止冒泡，避免触发两次 -->\r\n                                <button\r\n                                    class=\"detail-btn\"\r\n                                    @click.stop=\"openNoticeDetail(notice)\"\r\n                                >\r\n                                    查看详情\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div\r\n                            v-if=\"!isLoading && filteredNotices.length === 0\"\r\n                            style=\"padding: 12px; color: #999\"\r\n                        >\r\n                            暂无通知\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- 经验社区 -->\r\n                <div v-if=\"activeTab === 'community'\" class=\"community-content\">\r\n                    <div class=\"community-header\">\r\n                        <h2 class=\"section-title\">热门讨论</h2>\r\n\r\n                        <div\r\n                            style=\"display: flex; gap: 8px; align-items: center\"\r\n                        >\r\n                            <input\r\n                                v-model=\"postKeyword\"\r\n                                placeholder=\"搜索帖子标题/内容...\"\r\n                                style=\"\r\n                                    padding: 8px 10px;\r\n                                    border: 1px solid #eee;\r\n                                    border-radius: 10px;\r\n                                    outline: none;\r\n                                \"\r\n                            />\r\n                            <button\r\n                                class=\"post-btn\"\r\n                                style=\"padding: 8px 12px\"\r\n                                @click=\"fetchPosts\"\r\n                            >\r\n                                搜索\r\n                            </button>\r\n\r\n                            <!-- <button class=\"post-btn\" @click=\"openNewPost\">\r\n                                <svg\r\n                                    width=\"16\"\r\n                                    height=\"16\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                >\r\n                                    <path\r\n                                        d=\"M12 5v14m-7-7h14\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"2\"\r\n                                        stroke-linecap=\"round\"\r\n                                    />\r\n                                </svg>\r\n                                发布帖子\r\n                            </button> -->\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div\r\n                        style=\"padding: 10px; color: #666\"\r\n                        v-if=\"isPostsLoading\"\r\n                    >\r\n                        帖子加载中...\r\n                    </div>\r\n\r\n                    <div class=\"post-list\">\r\n                        <div\r\n                            v-for=\"post in posts\"\r\n                            :key=\"post.id\"\r\n                            class=\"post-item\"\r\n                            @click=\"goPostDetail(post.id)\"\r\n                            style=\"cursor: pointer\"\r\n                        >\r\n                            <h3 class=\"post-title\">{{ post.title }}</h3>\r\n                            <p class=\"post-preview\">{{ post.preview }}</p>\r\n                            <div class=\"post-meta\">\r\n                                <span class=\"post-author\">{{\r\n                                    post.author\r\n                                }}</span>\r\n                                <span class=\"post-stats\">\r\n                                    <svg\r\n                                        width=\"16\"\r\n                                        height=\"16\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                    >\r\n                                        <path\r\n                                            d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                        />\r\n                                        <path\r\n                                            d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                        />\r\n                                    </svg>\r\n                                    {{ post.views }}\r\n                                </span>\r\n                                <span class=\"post-stats\">\r\n                                    <svg\r\n                                        width=\"16\"\r\n                                        height=\"16\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                    >\r\n                                        <path\r\n                                            d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                        />\r\n                                    </svg>\r\n                                    {{ post.replies }} 回复\r\n                                </span>\r\n                                <span class=\"post-time\">{{ post.time }}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div\r\n                            v-if=\"!isPostsLoading && posts.length === 0\"\r\n                            style=\"padding: 12px; color: #999\"\r\n                        >\r\n                            暂无帖子\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- 资料共享 -->\r\n                <div v-if=\"activeTab === 'resources'\" class=\"resources-content\">\r\n                    <div class=\"resources-header\">\r\n                        <h2 class=\"section-title\">资料列表</h2>\r\n\r\n                        <!-- 这里只做列表+下载；上传需要 file input & multipart，我可以下一步给你补 -->\r\n                        <button class=\"upload-btn\" @click=\"triggerUpload\">\r\n                            <svg\r\n                                width=\"16\"\r\n                                height=\"16\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                fill=\"none\"\r\n                            >\r\n                                <path\r\n                                    d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\r\n                                    stroke=\"currentColor\"\r\n                                    stroke-width=\"2\"\r\n                                    stroke-linecap=\"round\"\r\n                                    stroke-linejoin=\"round\"\r\n                                />\r\n                            </svg>\r\n                            上传资料\r\n                        </button>\r\n\r\n                        <!-- 隐藏 input（你要上传功能再接 resourcesUploadAPI） -->\r\n                        <input\r\n                            ref=\"fileInput\"\r\n                            type=\"file\"\r\n                            style=\"display: none\"\r\n                            @change=\"onPickFile\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div\r\n                        style=\"padding: 10px; color: #666\"\r\n                        v-if=\"isFilesLoading\"\r\n                    >\r\n                        资料加载中...\r\n                    </div>\r\n\r\n                    <div class=\"resources-grid\">\r\n                        <div\r\n                            v-for=\"file in files\"\r\n                            :key=\"file.id\"\r\n                            class=\"file-card\"\r\n                        >\r\n                            <div class=\"file-icon\" :class=\"file.type\">\r\n                                <svg\r\n                                    v-if=\"file.type === 'pdf'\"\r\n                                    width=\"40\"\r\n                                    height=\"40\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                >\r\n                                    <path\r\n                                        d=\"M7 18h10M9.5 6h5M9.5 6a2 2 0 11-4 0 2 2 0 014 0zm0 0V18m5.5-12a2 2 0 114 0 2 2 0 01-4 0zm0 0V18\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"2\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                    />\r\n                                </svg>\r\n                                <svg\r\n                                    v-else\r\n                                    width=\"40\"\r\n                                    height=\"40\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                >\r\n                                    <path\r\n                                        d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"2\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                    />\r\n                                </svg>\r\n                            </div>\r\n                            <div class=\"file-info\">\r\n                                <h4 class=\"file-name\">{{ file.name }}</h4>\r\n                                <p class=\"file-meta\">\r\n                                    大小: {{ file.size }} • 上传者:\r\n                                    {{ file.uploader }}\r\n                                </p>\r\n                                <p class=\"file-meta\" style=\"color: #999\">\r\n                                    上传时间: {{ file.upload_time || '-' }}\r\n                                </p>\r\n                            </div>\r\n                            <button\r\n                                class=\"download-btn\"\r\n                                @click=\"downloadFile(file)\"\r\n                            >\r\n                                <svg\r\n                                    width=\"20\"\r\n                                    height=\"20\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                >\r\n                                    <path\r\n                                        d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"2\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                    />\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div\r\n                            v-if=\"!isFilesLoading && files.length === 0\"\r\n                            style=\"padding: 12px; color: #999\"\r\n                        >\r\n                            暂无资料\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { univInfoAPI, univNoticesAPI, univPostsAPI } from '@/api/universities'\r\nimport { resourceListAPI, resourceUploadAPI } from '@/api/resources'\r\nimport { postDetailAPI, newPostAPI, newCommentAPI } from '@/api/posts'\r\n\r\nexport default {\r\n    name: 'SchoolDetail',\r\n    data() {\r\n        return {\r\n            activeTab: 'notice',\r\n            tabs: [\r\n                { id: 'notice', name: '招生通知' },\r\n                { id: 'community', name: '经验社区' },\r\n                { id: 'resources', name: '资料共享' }\r\n            ],\r\n\r\n            isLoading: false,\r\n            errorMsg: '',\r\n\r\n            univId: null,\r\n\r\n            // ✅ 从登录信息里拿（不要写死 5001）\r\n            userId: null,\r\n\r\n            school: { id: null, name: '', logo_url: '', tags: [], intro: '' },\r\n\r\n            filters: { college: '', type: '', status: '' },\r\n            notices: [],\r\n\r\n            postKeyword: '',\r\n            posts: [],\r\n            isPostsLoading: false,\r\n\r\n            // ✅ 不再用弹窗详情（改为跳转）\r\n            showPostModal: false,\r\n            postDetail: null,\r\n            isPostDetailLoading: false,\r\n            commentInput: '',\r\n\r\n            showNewPostModal: false,\r\n            newPostForm: { title: '', content: '' },\r\n\r\n            files: [],\r\n            isFilesLoading: false\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        deptOptions() {\r\n            const set = new Set()\r\n            ;(this.notices || []).forEach(\r\n                n => n?.dept_name && set.add(n.dept_name)\r\n            )\r\n            return Array.from(set)\r\n        },\r\n        filteredNotices() {\r\n            let list = this.notices || []\r\n            if (this.filters.college) {\r\n                list = list.filter(\r\n                    n => (n.dept_name || '') === this.filters.college\r\n                )\r\n            }\r\n            return list\r\n        }\r\n    },\r\n\r\n    async mounted() {\r\n        this.resolveUnivId()\r\n        this.resolveUserId()\r\n\r\n        if (!this.userId) {\r\n            this.errorMsg = '未登录或登录信息缺失：请先登录以获取 user_id'\r\n            // 你也可以选择直接跳转登录\r\n            // this.$router.push('/login')\r\n            return\r\n        }\r\n\r\n        if (!this.univId || Number.isNaN(this.univId)) {\r\n            this.errorMsg =\r\n                '缺少 univ_id：请检查 School.vue 跳转是否传入 params.id 或 query.univ_id，以及路由是否支持 /school/detail/:id'\r\n            return\r\n        }\r\n\r\n        await this.refreshAll()\r\n    },\r\n\r\n    methods: {\r\n        // ✅ 从 localStorage 读取 user_id（登录接口是唯一合法来源）\r\n        resolveUserId() {\r\n            const v = localStorage.getItem('user_id')\r\n            const id = v ? Number(v) : null\r\n            this.userId = Number.isFinite(id) && id > 0 ? id : null\r\n        },\r\n\r\n        resolveUnivId() {\r\n            const raw =\r\n                this.$route?.params?.univ_id ??\r\n                this.$route?.params?.id ??\r\n                this.$route?.query?.univ_id ??\r\n                this.$route?.query?.id\r\n\r\n            this.univId =\r\n                raw !== undefined && raw !== null && raw !== ''\r\n                    ? Number(raw)\r\n                    : null\r\n        },\r\n\r\n        unwrap(res) {\r\n            return res?.data ?? res\r\n        },\r\n\r\n        isOk(payload) {\r\n            if (payload == null) return false\r\n            if (Array.isArray(payload)) return true\r\n            if (typeof payload === 'object' && !('code' in payload)) return true\r\n            return payload.code === 200\r\n        },\r\n\r\n        // ✅ 页面返回按钮：优先回退，否则回院校列表（你的路由是 /main/school）\r\n        goBack() {\r\n            if (window.history.length > 1) this.$router.back()\r\n            else this.$router.push('/main/school')\r\n        },\r\n\r\n        async refreshAll() {\r\n            this.isLoading = true\r\n            this.errorMsg = ''\r\n            try {\r\n                await this.fetchSchoolInfo()\r\n                await this.fetchNotices()\r\n                await this.fetchPosts()\r\n                await this.fetchResources()\r\n            } catch (e) {\r\n                console.error('[SchoolDetail] refreshAll error:', e)\r\n                this.errorMsg =\r\n                    '请求失败：请检查后端是否启动、baseURL/代理、跨域、接口路径是否一致'\r\n            } finally {\r\n                this.isLoading = false\r\n            }\r\n        },\r\n\r\n        async fetchSchoolInfo() {\r\n            const res = await univInfoAPI(this.univId)\r\n            const payload = this.unwrap(res)\r\n\r\n            if (!this.isOk(payload)) return\r\n\r\n            const info = payload?.data ?? payload\r\n            this.school = {\r\n                id: info.id ?? this.univId,\r\n                name: info.name ?? '',\r\n                logo_url: info.logo_url ?? '',\r\n                tags: Array.isArray(info.tags)\r\n                    ? info.tags\r\n                    : typeof info.tags === 'string'\r\n                    ? info.tags\r\n                          .split(',')\r\n                          .map(s => s.trim())\r\n                          .filter(Boolean)\r\n                    : [],\r\n                intro: info.intro ?? info.description ?? info.brief ?? ''\r\n            }\r\n        },\r\n\r\n        async fetchNotices() {\r\n            const res = await univNoticesAPI(this.univId)\r\n            const payload = this.unwrap(res)\r\n\r\n            const raw = Array.isArray(payload)\r\n                ? payload\r\n                : payload?.data ?? payload?.notices ?? []\r\n            const list = Array.isArray(raw) ? raw : []\r\n\r\n            this.notices = list.map(x => ({\r\n                id: x.id,\r\n                dept_name: x.dept_name,\r\n                tag: x.dept_name,\r\n                tagColor: '#E0E7FF',\r\n                title: x.title,\r\n                deadline: x.end_date,\r\n                source_link: x.source_link,\r\n                status: this.calcNoticeStatus(x.end_date)\r\n            }))\r\n        },\r\n\r\n        calcNoticeStatus(endDateStr) {\r\n            if (!endDateStr) return 'ended'\r\n            const end = new Date(endDateStr + ' 23:59:59')\r\n            return new Date() <= end ? 'ongoing' : 'ended'\r\n        },\r\n\r\n        // ✅ 保留一个版本，删掉你原来的重复 openNoticeDetail\r\n        openNoticeDetail(notice) {\r\n            let url = (notice?.source_link || '').trim()\r\n            if (!url) return\r\n            if (url.startsWith('//')) url = 'https:' + url\r\n            if (/^https?:$/i.test(url)) return\r\n            if (!/^https?:\\/\\//i.test(url)) url = 'https://' + url\r\n            try {\r\n                // eslint-disable-next-line no-new\r\n                new URL(url)\r\n                window.open(url, '_blank')\r\n            } catch (e) {\r\n                console.warn('[SchoolDetail] invalid URL:', url, notice, e)\r\n            }\r\n        },\r\n\r\n        async fetchPosts() {\r\n            this.isPostsLoading = true\r\n            try {\r\n                const res = await univPostsAPI({\r\n                    univ_id: this.univId,\r\n                    keyword: this.postKeyword\r\n                })\r\n                const payload = this.unwrap(res)\r\n\r\n                if (!this.isOk(payload)) {\r\n                    this.posts = []\r\n                    return\r\n                }\r\n\r\n                const list = Array.isArray(payload)\r\n                    ? payload\r\n                    : payload?.data ?? []\r\n                this.posts = (Array.isArray(list) ? list : []).map(p => ({\r\n                    id: p.id,\r\n                    title: p.title,\r\n                    preview:\r\n                        (p.content || '').slice(0, 60) +\r\n                        ((p.content || '').length > 60 ? '...' : ''),\r\n                    author: p.author_nickname,\r\n                    views: p.view_count,\r\n                    replies: p.reply_count,\r\n                    time: p.created_at\r\n                }))\r\n            } finally {\r\n                this.isPostsLoading = false\r\n            }\r\n        },\r\n\r\n        // ✅ 经验社区：点击跳转到帖子详情页（方案 A）\r\n        goPostDetail(postId) {\r\n            if (!postId) return\r\n            this.$router.push({\r\n                name: 'Postdetail',\r\n                params: { id: String(postId) }\r\n            })\r\n        },\r\n\r\n        // ✅ 如果你模板里还在用 openPostDetail(post.id)，这里做个兼容：直接跳转\r\n        openPostDetail(postId) {\r\n            this.goPostDetail(postId)\r\n        },\r\n\r\n        async fetchResources() {\r\n            this.isFilesLoading = true\r\n            try {\r\n                const res = await resourceListAPI(this.univId)\r\n                const payload = this.unwrap(res)\r\n\r\n                if (!this.isOk(payload)) {\r\n                    this.files = []\r\n                    return\r\n                }\r\n\r\n                const list = Array.isArray(payload)\r\n                    ? payload\r\n                    : payload?.data ?? []\r\n                this.files = (Array.isArray(list) ? list : []).map((f, idx) => {\r\n                    const ext = (f.file_name || '')\r\n                        .split('.')\r\n                        .pop()\r\n                        ?.toLowerCase()\r\n                    return {\r\n                        id: f.id ?? `${idx}-${f.file_name}`,\r\n                        name: f.file_name,\r\n                        size: f.file_size ?? '-',\r\n                        uploader: f.user_name ?? f.user_id ?? '-',\r\n                        type: ext === 'pdf' ? 'pdf' : 'doc',\r\n                        file_url: f.file_url,\r\n                        upload_time: f.created_at ?? f.upload_time ?? '-'\r\n                    }\r\n                })\r\n            } finally {\r\n                this.isFilesLoading = false\r\n            }\r\n        },\r\n\r\n        openNewPost() {\r\n            this.showNewPostModal = true\r\n            this.newPostForm = { title: '', content: '' }\r\n        },\r\n\r\n        async submitNewPost() {\r\n            const title = this.newPostForm.title.trim()\r\n            const content = this.newPostForm.content.trim()\r\n            if (!title || !content) return\r\n\r\n            try {\r\n                await newPostAPI({\r\n                    univ_id: this.univId,\r\n                    user_id: this.userId,\r\n                    title,\r\n                    content\r\n                })\r\n                this.showNewPostModal = false\r\n                await this.fetchPosts()\r\n            } catch (e) {\r\n                console.error('[SchoolDetail] newPost failed:', e)\r\n                this.$message?.error?.(e?.message || '发布失败')\r\n            }\r\n        },\r\n\r\n        // ⚠️ 由于我们改成“跳转详情页评论”，这里保留但一般用不到\r\n        async submitComment() {\r\n            const content = this.commentInput.trim()\r\n            const postId = this.postDetail?.post?.id\r\n            if (!content || !postId) return\r\n\r\n            try {\r\n                await newCommentAPI({\r\n                    post_id: postId,\r\n                    user_id: this.userId,\r\n                    content\r\n                })\r\n                this.commentInput = ''\r\n                // 重新拉取弹窗详情（如果你还保留弹窗）\r\n                await this.openPostDetail(postId)\r\n            } catch (e) {\r\n                console.error('[SchoolDetail] comment failed:', e)\r\n                this.$message?.error?.(e?.message || '评论失败')\r\n            }\r\n        },\r\n\r\n        downloadFile(file) {\r\n            if (!file?.file_url) return\r\n            window.open(file.file_url, '_blank')\r\n        },\r\n\r\n        triggerUpload() {\r\n            this.$refs.fileInput?.click()\r\n        },\r\n\r\n        async onPickFile(e) {\r\n            const file = e?.target?.files?.[0]\r\n            e.target.value = ''\r\n            if (!file) return\r\n\r\n            if (!this.userId) {\r\n                this.$message?.error?.('未登录，无法上传')\r\n                return\r\n            }\r\n\r\n            try {\r\n                this.isFilesLoading = true\r\n                await resourceUploadAPI({\r\n                    univ_id: this.univId,\r\n                    user_id: this.userId,\r\n                    file,\r\n                    file_name: file.name\r\n                })\r\n                await this.fetchResources()\r\n            } catch (err) {\r\n                console.error('[SchoolDetail] upload failed:', err)\r\n                this.errorMsg =\r\n                    err?.response?.data?.message || err?.message || '上传失败'\r\n            } finally {\r\n                this.isFilesLoading = false\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.notice-item {\r\n    cursor: pointer;\r\n}\r\n\r\n.notice-item:active {\r\n    transform: translateY(1px);\r\n}\r\n.school-detail {\r\n    padding: 24px 40px;\r\n    background: var(--home-bg, #f3f4f6);\r\n    min-height: 100vh;\r\n    margin-top: 60px;\r\n}\r\n\r\n.back-btn {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    color: var(--text-secondary, #6b7280);\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    margin-bottom: 24px;\r\n    transition: color 0.2s;\r\n}\r\n\r\n.back-btn:hover {\r\n    color: var(--text-primary, #1f2937);\r\n}\r\n\r\n.school-info-card {\r\n    background: var(--card-bg, white);\r\n    border-radius: 12px;\r\n    padding: 32px;\r\n    display: flex;\r\n    gap: 24px;\r\n    margin-bottom: 24px;\r\n    box-shadow: var(--box-shadow, 0 1px 3px rgba(0, 0, 0, 0.1));\r\n}\r\n\r\n.school-avatar-large {\r\n    width: 100px;\r\n    height: 100px;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    border-radius: 12px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 48px;\r\n    font-weight: 700;\r\n    color: white;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.school-logo-large {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain; /* 校徽一般用 contain */\r\n    border-radius: 12px;\r\n}\r\n\r\n.school-main-info {\r\n    flex: 1;\r\n}\r\n\r\n.school-name {\r\n    font-size: 28px;\r\n    font-weight: 700;\r\n    color: var(--text-primary, #1f2937);\r\n    margin: 0 0 12px 0;\r\n}\r\n\r\n.school-tags {\r\n    display: flex;\r\n    gap: 8px;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n.tag {\r\n    padding: 4px 12px;\r\n    background: #eff6ff;\r\n    color: #3b82f6;\r\n    border-radius: 4px;\r\n    font-size: 13px;\r\n    font-weight: 500;\r\n}\r\n\r\n.school-description {\r\n    font-size: 15px;\r\n    color: var(--text-secondary, #6b7280);\r\n    margin: 0;\r\n    line-height: 1.6;\r\n}\r\n\r\n.tabs-container {\r\n    background: var(--card-bg, white);\r\n    border-radius: 12px;\r\n    overflow: hidden;\r\n    box-shadow: var(--box-shadow, 0 1px 3px rgba(0, 0, 0, 0.1));\r\n}\r\n\r\n.tabs-nav {\r\n    display: flex;\r\n    border-bottom: 1px solid var(--border-color, #e5e7eb);\r\n    padding: 0 32px;\r\n    overflow-x: auto;\r\n    -webkit-overflow-scrolling: touch;\r\n    scrollbar-width: none;\r\n}\r\n\r\n.tabs-nav::-webkit-scrollbar {\r\n    display: none;\r\n}\r\n\r\n.tab-btn {\r\n    padding: 16px 24px;\r\n    background: transparent;\r\n    border: none;\r\n    border-bottom: 2px solid transparent;\r\n    color: var(--text-secondary, #6b7280);\r\n    font-size: 15px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    position: relative;\r\n    bottom: -1px;\r\n}\r\n\r\n.tab-btn:hover {\r\n    color: #3b82f6;\r\n}\r\n\r\n.tab-btn.active {\r\n    color: #3b82f6;\r\n    border-bottom-color: #3b82f6;\r\n}\r\n\r\n.tab-content {\r\n    padding: 32px;\r\n}\r\n\r\n/* 招生通知样式 */\r\n.filter-row {\r\n    display: flex;\r\n    gap: 12px;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.filter-select {\r\n    padding: 8px 16px;\r\n    border: 1px solid var(--border-color, #e5e7eb);\r\n    border-radius: 6px;\r\n    background: var(--card-bg, white);\r\n    color: var(--text-primary, #1f2937);\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    outline: none;\r\n}\r\n\r\n.notice-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 16px;\r\n}\r\n\r\n.notice-item {\r\n    padding: 20px;\r\n    border: 1px solid var(--border-color, #e5e7eb);\r\n    border-radius: 8px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.notice-item:hover {\r\n    border-color: #3b82f6;\r\n    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.notice-header {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 12px;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n.notice-tag {\r\n    padding: 4px 12px;\r\n    border-radius: 4px;\r\n    font-size: 12px;\r\n    font-weight: 500;\r\n    color: #3b82f6;\r\n}\r\n\r\n.notice-title {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: var(--text-primary, #1f2937);\r\n    margin: 0;\r\n    flex: 1;\r\n}\r\n\r\n.notice-meta {\r\n    display: flex;\r\n    gap: 16px;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n.meta-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 6px;\r\n    font-size: 13px;\r\n    color: var(--text-secondary, #6b7280);\r\n}\r\n\r\n.notice-actions {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.status-badge {\r\n    padding: 4px 12px;\r\n    border-radius: 4px;\r\n    font-size: 12px;\r\n    font-weight: 500;\r\n}\r\n\r\n.status-badge.ongoing {\r\n    background: #d1fae5;\r\n    color: #059669;\r\n}\r\n\r\n.detail-btn {\r\n    padding: 6px 16px;\r\n    background: transparent;\r\n    border: 1px solid #3b82f6;\r\n    color: #3b82f6;\r\n    border-radius: 4px;\r\n    font-size: 13px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.detail-btn:hover {\r\n    background: #3b82f6;\r\n    color: white;\r\n}\r\n\r\n/* 经验社区样式 */\r\n.community-header,\r\n.resources-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.section-title {\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    color: var(--text-primary, #1f2937);\r\n    margin: 0;\r\n}\r\n\r\n.post-btn,\r\n.upload-btn {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    padding: 10px 20px;\r\n    background: #3b82f6;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.post-btn:hover,\r\n.upload-btn:hover {\r\n    background: #2563eb;\r\n}\r\n\r\n.post-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 16px;\r\n}\r\n\r\n.post-item {\r\n    padding: 20px;\r\n    border: 1px solid var(--border-color, #e5e7eb);\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.post-item:hover {\r\n    border-color: #3b82f6;\r\n    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.post-title {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: var(--text-primary, #1f2937);\r\n    margin: 0 0 8px 0;\r\n}\r\n\r\n.post-preview {\r\n    font-size: 14px;\r\n    color: var(--text-secondary, #6b7280);\r\n    margin: 0 0 12px 0;\r\n    line-height: 1.5;\r\n}\r\n\r\n.post-meta {\r\n    display: flex;\r\n    gap: 16px;\r\n    align-items: center;\r\n    font-size: 13px;\r\n    color: var(--text-tertiary, #9ca3af);\r\n}\r\n\r\n.post-author {\r\n    font-weight: 500;\r\n}\r\n\r\n.post-stats {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n}\r\n\r\n.post-time {\r\n    margin-left: auto;\r\n}\r\n\r\n/* 资料共享样式 */\r\n.resources-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\r\n    gap: 16px;\r\n}\r\n\r\n.file-card {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n    padding: 20px;\r\n    border: 1px solid var(--border-color, #e5e7eb);\r\n    border-radius: 8px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.file-card:hover {\r\n    border-color: #3b82f6;\r\n    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.file-icon {\r\n    width: 64px;\r\n    height: 64px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 8px;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.file-icon.pdf {\r\n    background: #fee2e2;\r\n    color: #dc2626;\r\n}\r\n\r\n.file-icon.doc {\r\n    background: #dbeafe;\r\n    color: #2563eb;\r\n}\r\n\r\n.file-info {\r\n    flex: 1;\r\n    min-width: 0;\r\n}\r\n\r\n.file-name {\r\n    font-size: 15px;\r\n    font-weight: 600;\r\n    color: var(--text-primary, #1f2937);\r\n    margin: 0 0 6px 0;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n\r\n.file-meta {\r\n    font-size: 13px;\r\n    color: var(--text-tertiary, #9ca3af);\r\n    margin: 0;\r\n}\r\n\r\n.download-btn {\r\n    width: 40px;\r\n    height: 40px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: var(--home-bg, #f3f4f6);\r\n    border: none;\r\n    border-radius: 6px;\r\n    color: var(--text-secondary, #6b7280);\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.download-btn:hover {\r\n    background: #3b82f6;\r\n    color: white;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .school-detail {\r\n        padding: 16px;\r\n    }\r\n\r\n    .back-btn {\r\n        font-size: 13px;\r\n    }\r\n\r\n    .school-info-card {\r\n        padding: 20px;\r\n        gap: 16px;\r\n    }\r\n\r\n    .school-avatar-large {\r\n        width: 80px;\r\n        height: 80px;\r\n        font-size: 36px;\r\n    }\r\n\r\n    .school-name {\r\n        font-size: 22px;\r\n    }\r\n\r\n    .school-tags {\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    .school-description {\r\n        font-size: 14px;\r\n    }\r\n\r\n    .tabs-nav {\r\n        padding: 0 16px;\r\n        overflow-x: auto;\r\n        -webkit-overflow-scrolling: touch;\r\n    }\r\n\r\n    .tab-btn {\r\n        padding: 14px 16px;\r\n        font-size: 14px;\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .tab-content {\r\n        padding: 20px 16px;\r\n    }\r\n\r\n    .filter-row {\r\n        flex-direction: column;\r\n    }\r\n\r\n    .filter-select {\r\n        width: 100%;\r\n    }\r\n\r\n    .notice-item {\r\n        padding: 16px;\r\n    }\r\n\r\n    .notice-header {\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    .notice-title {\r\n        font-size: 15px;\r\n        width: 100%;\r\n        margin-top: 8px;\r\n    }\r\n\r\n    .notice-meta {\r\n        flex-wrap: wrap;\r\n        gap: 12px;\r\n    }\r\n\r\n    .meta-item {\r\n        font-size: 12px;\r\n    }\r\n\r\n    .notice-actions {\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n        gap: 12px;\r\n    }\r\n\r\n    .detail-btn {\r\n        width: 100%;\r\n        justify-content: center;\r\n    }\r\n\r\n    .community-header,\r\n    .resources-header {\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n        gap: 16px;\r\n    }\r\n\r\n    .post-btn,\r\n    .upload-btn {\r\n        width: 100%;\r\n        justify-content: center;\r\n    }\r\n\r\n    .section-title {\r\n        font-size: 18px;\r\n    }\r\n\r\n    .post-item {\r\n        padding: 16px;\r\n    }\r\n\r\n    .post-title {\r\n        font-size: 15px;\r\n    }\r\n\r\n    .post-preview {\r\n        font-size: 13px;\r\n    }\r\n\r\n    .post-meta {\r\n        flex-wrap: wrap;\r\n        gap: 8px;\r\n        font-size: 12px;\r\n    }\r\n\r\n    .post-time {\r\n        margin-left: 0;\r\n        width: 100%;\r\n    }\r\n\r\n    .resources-grid {\r\n        grid-template-columns: 1fr;\r\n    }\r\n\r\n    .file-card {\r\n        padding: 16px;\r\n    }\r\n\r\n    .file-icon {\r\n        width: 48px;\r\n        height: 48px;\r\n    }\r\n\r\n    .file-icon svg {\r\n        width: 28px;\r\n        height: 28px;\r\n    }\r\n\r\n    .file-name {\r\n        font-size: 14px;\r\n    }\r\n\r\n    .file-meta {\r\n        font-size: 12px;\r\n    }\r\n\r\n    .download-btn {\r\n        width: 36px;\r\n        height: 36px;\r\n    }\r\n\r\n    .download-btn svg {\r\n        width: 18px;\r\n        height: 18px;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}