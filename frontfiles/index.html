<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>职业规划智能体</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;500;600;700;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=4">
</head>
<body>
    <div id="app">
        <!-- 加载动画 -->
        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>加载中...</p>
        </div>

        <!-- 顶部导航 -->
        <nav id="navbar" class="navbar hidden">
            <div class="nav-container">
                <div class="nav-brand">
                    <h1>职业规划智能体</h1>
                </div>
                <div class="nav-menu">
                    <a href="#" class="nav-link" data-page="dashboard">首页</a>
                    <a href="#" class="nav-link" data-page="profile">个人档案</a>
                    <a href="#" class="nav-link" data-page="assessment">职业测评</a>
                    <a href="#" class="nav-link" data-page="jobProfile">岗位画像</a>
                    <a href="#" class="nav-link" data-page="abilityProfile">能力画像</a>
                    <a href="#" class="nav-link" data-page="matching">岗位匹配</a>
                    <a href="#" class="nav-link" data-page="report">职业规划</a>
                </div>
                <div class="nav-user">
                    <div class="user-info">
                        <img id="userAvatar" src="" alt="用户头像" class="user-avatar">
                        <span id="userName"></span>
                    </div>
                    <button id="logoutBtn" class="btn-logout">退出</button>
                </div>
            </div>
        </nav>

        <!-- 漂移光晕背景 -->
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
        
        <!-- 登录页面 -->
        <div id="loginPage" class="page">
            <div class="login-container">
                <!-- 背景装饰圆 -->
                <div class="login-bg-circles" aria-hidden="true">
                    <span class="login-circle login-circle-1"></span>
                    <span class="login-circle login-circle-2"></span>
                    <span class="login-circle login-circle-3"></span>
                    <span class="login-circle login-circle-4"></span>
                </div>
                
                <!-- 背景特效 -->
                <div class="bg-grid"></div>
                <div class="bg-blobs">
                    <div class="bg-blob bg-blob-1"></div>
                    <div class="bg-blob bg-blob-2"></div>
                    <div class="bg-blob bg-blob-3"></div>
                </div>
                <div class="bg-particles">
                    <div class="bg-particle bg-particle-1"></div>
                    <div class="bg-particle bg-particle-2"></div>
                    <div class="bg-particle bg-particle-3"></div>
                    <div class="bg-particle bg-particle-4"></div>
                    <div class="bg-particle bg-particle-5"></div>
                    <div class="bg-particle bg-particle-6"></div>
                    <div class="bg-particle bg-particle-7"></div>
                    <div class="bg-particle bg-particle-8"></div>
                    <div class="bg-particle bg-particle-9"></div>
                    <div class="bg-particle bg-particle-10"></div>
                    <div class="bg-particle bg-particle-11"></div>
                    <div class="bg-particle bg-particle-12"></div>
                    <div class="bg-particle bg-particle-13"></div>
                    <div class="bg-particle bg-particle-14"></div>
                    <div class="bg-particle bg-particle-15"></div>
                    <div class="bg-particle bg-particle-16"></div>
                    <div class="bg-particle bg-particle-17"></div>
                    <div class="bg-particle bg-particle-18"></div>
                    <div class="bg-particle bg-particle-19"></div>
                    <div class="bg-particle bg-particle-20"></div>
                </div>
                
                <!-- 左侧品牌区域 -->
                <div class="brand-section">
                    <div class="brand-logo">
                        <div class="logo-square">C</div>
                        <div class="brand-name">
                            <h1>职业规划智能体</h1>
                            <p>CAREER INTELLIGENCE</p>
                        </div>
                    </div>
                    
                    <div class="brand-title">
                        <h3><span class="title-line"></span>从这里开始</h3>
                        <h2>规划你的<br><span class="blue-text">职业未来</span></h2>
                    </div>
                    
                    <div class="brand-description">
                        <p>基于 AI 深度分析，为你量身定制职业发展路径，洞察行业趋势，助你做出更明智的职业决策。</p>
                        <p>我们提供专业的职业测评、岗位匹配和个性化规划报告，帮助你找到最适合的职业方向。</p>
                    </div>
                    
                    <!-- 统计数据 -->
                    <div class="stats-section">
                        <div class="stats-row">
                            <div class="stat-item">
                                <div class="stat-number">10000<span class="stat-suffix">+</span></div>
                                <div class="stat-label">条岗位数据</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">100<span class="stat-suffix">+</span></div>
                                <div class="stat-label">覆盖岗位类型</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">90<span class="stat-suffix">%+</span></div>
                                <div class="stat-label">人岗匹配准确率</div>
                            </div>
                        </div>
                    </div>

                </div>
                
                <!-- 右侧登录表单 -->
                <div class="form-section">
                    <div class="career-login-card">
                            <div class="card-gradient-bar"></div>
                            <form id="loginForm" class="career-login-form">
                                <!-- 登录标题和副标题 -->
                                <div class="login-header">
                                    <h2 class="login-title">欢迎回来</h2>
                                    <p class="login-subtitle">登录以继续你的职业规划之旅</p>
                                </div>
                                

                                
                                <!-- 账号登录表单 -->
                                <div class="form-group">
                                    <label class="form-label">账号</label>
                                    <div class="input-with-icon">
                                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="#7e93c0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M20 15C20 18.7712 16.7712 22 12 22C7.22876 22 4 18.7712 4 15" stroke="#7e93c0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        <input type="text" id="loginUsername" value="admin" placeholder="admin / test / student" required>
                                    </div>
                                    <div class="error-message" id="loginUsernameError"></div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">密码</label>
                                    <div class="input-with-icon">
                                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <rect x="4" y="7" width="16" height="12" rx="2" stroke="#7e93c0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M8 11V9" stroke="#7e93c0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M16 11V9" stroke="#7e93c0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        <input type="password" id="loginPassword" value="123456" placeholder="密码：123456" required>
                                    </div>
                                    <div class="error-message" id="loginPasswordError"></div>
                                </div>
                                
                                <!-- 记住我和忘记密码 -->
                                <div class="login-options">
                                    <div class="remember-me">
                                        <input type="checkbox" id="rememberMe">
                                        <label for="rememberMe">记住我</label>
                                    </div>
                                    <a href="#" class="forgot-password">忘记密码？</a>
                                </div>
                            
                            <button type="submit" class="career-btn-login">登录</button>
                        
                        <div class="form-divider">
                            <span>或者</span>
                        </div>
                        
                        <button type="button" id="goRegister" class="career-btn-register">创建新账号</button>
                        
                        <!-- 服务条款和隐私政策 -->
                        <div class="login-terms">
                            <p>登录即表示同意 <a href="#">服务条款</a> 与 <a href="#">隐私政策</a></p>
                        </div>
                    </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- 忘记密码弹窗 -->
        <div id="forgotPasswordModal" class="modal-overlay hidden">
            <div class="modal-content" style="max-width:400px;">
                <div class="modal-header" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
                    <h3 style="margin:0;">忘记密码</h3>
                    <button type="button" id="forgotPasswordClose" class="btn-ghost" aria-label="关闭">&times;</button>
                </div>
                <div id="forgotPasswordStep1">
                    <div class="form-group">
                        <label>账号</label>
                        <input type="text" id="forgotUsername" placeholder="请输入注册时的用户名">
                    </div>
                    <div class="form-group">
                        <label>邮箱</label>
                        <input type="email" id="forgotEmail" placeholder="请输入绑定邮箱">
                    </div>
                    <button type="button" id="forgotSendCodeBtn" class="btn-primary">发送验证码</button>
                </div>
                <div id="forgotPasswordStep2" class="hidden">
                    <div class="form-group">
                        <label>验证码</label>
                        <input type="text" id="forgotCode" placeholder="请输入邮箱收到的验证码">
                    </div>
                    <div class="form-group">
                        <label>新密码</label>
                        <input type="password" id="forgotNewPassword" placeholder="请输入新密码">
                    </div>
                    <button type="button" id="forgotResetBtn" class="btn-primary">重置密码</button>
                </div>
                <p id="forgotPasswordMsg" class="hint-text" style="margin-top:12px;"></p>
            </div>
        </div>

        <!-- 注册页面 -->
        <div id="registerPage" class="page hidden">
            <div class="login-container">
                <div class="login-card">
                    <div class="login-header">
                        <h1>创建账户</h1>
                        <p>开始您的职业规划之旅</p>
                    </div>
                    <form id="registerForm" class="login-form">
                        <div class="form-group">
                            <label for="regUsername">用户名</label>
                            <input type="text" id="regUsername" placeholder="请输入用户名" required>
                            <div class="error-message" id="regUsernameError"></div>
                        </div>
                        <div class="form-group">
                            <label for="regPassword">密码</label>
                            <input type="password" id="regPassword" placeholder="请输入密码" required>
                            <div class="error-message" id="regPasswordError"></div>
                        </div>
                        <div class="form-group">
                            <label for="regNickname">姓名</label>
                            <input type="text" id="regNickname" placeholder="请输入姓名" required>
                            <div class="error-message" id="regNicknameError"></div>
                        </div>
                        <div class="form-group">
                            <label for="regAvatar">头像(可选)</label>
                            <input type="file" id="regAvatar" accept="image/*">
                        </div>
                        <button type="submit" class="btn-primary">注册</button>
                    </form>
                    <div class="login-footer">
                        <p>已有账户? <a href="#" id="showLogin">立即登录</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 背景层 -->
        <div class="bg-layer">
            <div class="blob blob-1"></div>
            <div class="blob blob-2"></div>
            <div class="blob blob-3"></div>
            <canvas id="particles"></canvas>
        </div>

        <!-- 主页面 -->
        <div id="dashboardPage" class="page hidden">
            <!-- Hero 区域 -->
            <div class="hero-section">
                <div class="hero-content">
                    <div class="hero-left">
                        <div class="hero-badge">职业规划智能体</div>
                        <h1 class="hero-title">
                            <span id="welcomeName"></span>，你的职业规划助手已就绪
                        </h1>
                        <p class="hero-subtitle">
                            基于 Holland RIASEC × MBTI 双维度分析，为你量身定制职业发展路径。洞察行业趋势，做出更明智的每一个选择。
                        </p>
                        <div class="hero-chips">
                            <div class="hero-chip">● 精准职业测评</div>
                            <div class="hero-chip">● 智能岗位匹配</div>
                            <div class="hero-chip">● 个性化规划报告</div>
                        </div>
                    </div>
                    <div class="hero-right">
                        <div class="stat-card">
                            <div class="stat-number">10000+</div>
                            <div class="stat-label">条岗位数据</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">100+</div>
                            <div class="stat-label">覆盖岗位类型</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">90%+</div>
                            <div class="stat-label">人岗匹配准确率</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 分割标签 -->
            <div class="section-divider">— 我的进度</div>

            <!-- 主卡片区域 -->
            <div class="main-cards">
                <!-- 个人档案卡片 -->
                <div class="main-card" data-action="profile">
                    <div class="card-gradient card-gradient-1"></div>
                    <div class="card-content">
                        <div class="card-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 14C9.33333 14 4 15.3333 4 18V20H20V18C20 15.3333 14.6667 14 12 14Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3 class="card-title">完善个人档案</h3>
                        <p class="card-description">填写您的教育背景、专业技能和项目经历，AI将为你构建完整的职业能力画像</p>
                        <div class="card-status">
                            <div class="status-left">
                                <div class="status-value" id="profileCompleteness">0%</div>
                            </div>
                            <div class="status-right">
                                <span class="status-badge">待完善</span>
                            </div>
                        </div>
                    </div>
                    <button class="card-btn card-btn-primary">前往填写 →</button>
                </div>

                <!-- 职业测评卡片 -->
                <div class="main-card" data-action="assessment">
                    <div class="card-gradient card-gradient-2"></div>
                    <div class="card-content">
                        <div class="card-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 15C15.866 15 19 11.866 19 8C19 4.13401 15.866 1 12 1C8.13401 1 5 4.13401 5 8C5 11.866 8.13401 15 12 15Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 15C12 15 15 21 15 21H9C9 21 12 15 12 15Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 9V11" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 5V5.01" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3 class="card-title">职业测评</h3>
                        <p class="card-description">完成 Holland RIASEC × MBTI 双维度综合测评，深入了解您的职业兴趣与性格特质</p>
                        <div class="card-status">
                            <div class="status-left">
                                <div class="status-value" id="assessmentStatus">未完成</div>
                            </div>
                            <div class="status-right">
                                <span class="status-badge">待测评</span>
                            </div>
                        </div>
                    </div>
                    <button class="card-btn card-btn-primary">开始测评 →</button>
                </div>

                <!-- 岗位匹配卡片 -->
                <div class="main-card" data-action="matching">
                    <div class="card-gradient card-gradient-3"></div>
                    <div class="card-content">
                        <div class="card-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 7.61305 4.10535 5.32387 6 4C7.89465 2.67613 10.1847 2 12 2C13.8153 2 16.1054 2.67613 18 4C19.8946 5.32387 21 7.61305 21 10Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3 class="card-title">岗位匹配</h3>
                        <p class="card-description">查看与您匹配度最高的相关岗位，获取人岗匹配度分析和个性化规划报告</p>
                        <div class="card-status">
                            <div class="status-left">
                                <div class="status-value" id="matchedJobs">0</div>
                            </div>
                            <div class="status-right">
                                <span class="status-badge">完成测评后解锁</span>
                            </div>
                        </div>
                    </div>
                    <button class="card-btn card-btn-primary">查看匹配 →</button>
                </div>
            </div>
        </div>

        <!-- 个人档案页面 -->
        <div id="profilePage" class="page hidden">
            <div class="profile-container">
                <h2>个人档案</h2>
                
                <div class="profile-sections">
                    <!-- 基本信息 -->
                    <div class="profile-section">
                        <h3>基本信息</h3>
                        <form id="basicInfoForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>姓名</label>
                                    <input type="text" id="nickname" placeholder="请输入姓名">
                                </div>
                                <div class="form-group">
                                    <label>性别</label>
                                    <select id="gender">
                                        <option value="">请选择</option>
                                        <option value="男">男</option>
                                        <option value="女">女</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>出生日期</label>
                                    <div class="date-input-wrapper">
                                        <input type="text" id="birthDate" placeholder="年/月/日" autocomplete="bday" inputmode="numeric">
                                        <button type="button" class="date-picker-btn" id="birthDatePickerBtn" aria-label="选择日期"></button>
                                        <input type="date" id="birthDateNative" class="date-native-input" tabindex="-1" aria-hidden="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>手机号</label>
                                    <input type="tel" id="phone" placeholder="请输入手机号">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>邮箱</label>
                                <input type="email" id="email" placeholder="请输入邮箱">
                            </div>
                        </form>
                    </div>

                    <!-- 教育信息 -->
                    <div class="profile-section">
                        <h3>教育信息</h3>
                        <form id="educationForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>学校</label>
                                    <input type="text" id="school" placeholder="请输入学校名称">
                                </div>
                                <div class="form-group">
                                    <label>专业</label>
                                    <input type="text" id="major" placeholder="请输入专业">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>学历</label>
                                    <select id="degree">
                                        <option value="">请选择</option>
                                        <option value="本科">本科</option>
                                        <option value="硕士">硕士</option>
                                        <option value="博士">博士</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>年级</label>
                                    <input type="text" id="grade" placeholder="如: 2021级">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>预计毕业时间</label>
                                    <input type="text" id="expectedGraduation" placeholder="年/月">
                                </div>
                                <div class="form-group">
                                    <label>GPA</label>
                                    <input type="text" id="gpa" placeholder="如: 3.8/4.0">
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- 技能 -->
                    <div class="profile-section">
                        <h3>技能</h3>
                        <div id="skillsContainer">
                            <div class="skill-category">
                                <input type="text" placeholder="技能分类 (如: 编程语言)" class="skill-category-input">
                                <input type="text" placeholder="技能列表 (用逗号分隔)" class="skill-items-input">
                            </div>
                        </div>
                        <button type="button" id="addSkillCategory" class="btn-secondary">添加技能分类</button>
                    </div>

                    <!-- 简历上传 -->
                    <div class="profile-section">
                        <h3>上传简历 (AI自动解析)</h3>
                        <div class="upload-area">
                            <input type="file" id="resumeUpload" accept=".pdf" style="display: none;">
                            <button type="button" id="uploadResumeBtn" class="btn-secondary">选择PDF文件</button>
                            <p class="upload-hint">上传简历后,AI将自动解析并填充您的档案信息</p>
                            <div id="uploadStatus" class="upload-status"></div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button id="saveProfileBtn" class="btn-primary">保存档案</button>
                    <button id="viewProfileBtn" class="btn-secondary">查看完整档案</button>
                </div>
            </div>
        </div>

        <!-- 职业测评页面 -->
        <div id="assessmentPage" class="page hidden">
            <div class="assessment-container">
                <h2>职业测评问卷</h2>
                <p class="assessment-intro">请根据您的真实情况回答以下问题,帮助我们更好地了解您的职业倾向</p>
                
                <div id="questionnaireContainer">
                    <div class="loading-message">加载问卷中...</div>
                </div>

                <div class="assessment-actions hidden" id="assessmentActions">
                    <button id="submitAssessmentBtn" class="btn-primary">提交测评</button>
                    <button id="viewReportBtn" class="btn-secondary hidden">查看测评报告</button>
                </div>
            </div>
        </div>

        <!-- 岗位画像页面 -->
        <div id="jobProfilePage" class="page hidden">
            <div class="job-profile-container">
                <h2>📊 岗位画像</h2>
                <p style="color: var(--text-secondary); margin-bottom: 24px;">AI驱动的智能岗位分析系统 | GradQuest职业规划平台</p>
                
                <div class="job-profile-tabs">
                    <button class="tab-btn active" data-tab="list">📋 岗位列表</button>
                    <button class="tab-btn" data-tab="graph">🔗 关联图谱</button>
                    <button class="tab-btn" data-tab="ai">✨ AI生成</button>
                </div>

                <!-- 岗位列表 Tab -->
                <div class="tab-content active" id="listTab">
                    <div class="job-profile-filters">
                        <input type="text" id="jobProfileKeyword" placeholder="搜索岗位名称...">
                        <select id="jobProfileIndustry">
                            <option value="">全部行业</option>
                            <option value="互联网">互联网</option>
                            <option value="金融">金融</option>
                            <option value="制造业">制造业</option>
                            <option value="教育">教育</option>
                            <option value="医疗">医疗</option>
                        </select>
                        <select id="jobProfileLevel">
                            <option value="">全部级别</option>
                            <option value="初级">初级</option>
                            <option value="中级">中级</option>
                            <option value="高级">高级</option>
                        </select>
                        <button id="jobProfileSearchBtn" class="btn-primary">搜索</button>
                    </div>
                    <div id="jobProfileList" class="jobs-grid">
                        <div class="loading-message">加载岗位列表中...</div>
                    </div>
                </div>

                <!-- 关联图谱 Tab -->
                <div class="tab-content" id="graphTab">
                    <div class="graph-controls">
                        <input type="text" id="graphJobId" placeholder="岗位ID: job_001-job_012 (如: job_001 算法工程师)" style="flex: 1;">
                        <select id="graphTypeSelect">
                            <option value="all">全部</option>
                            <option value="vertical">垂直晋升</option>
                            <option value="transfer">横向转岗</option>
                        </select>
                        <button id="jobProfileGraphBtn" class="btn-primary">加载图谱</button>
                    </div>
                    <div id="jobProfileGraph" class="graph-container">
                        <p class="hint-text">请输入岗位ID并选择图谱类型</p>
                    </div>
                </div>

                <!-- AI生成 Tab -->
                <div class="tab-content" id="aiTab">
                    <div class="ai-generate-form" style="background: var(--card-bg); padding: 32px; border-radius: 16px; box-shadow: var(--shadow);">
                        <h3 style="margin-bottom: 24px; font-size: 20px; color: var(--text-primary);">AI生成岗位画像</h3>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-primary);">岗位名称 *</label>
                            <input type="text" id="aiJobName" placeholder="如: AI产品经理" style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px;">
                        </div>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-primary);">岗位描述（可选，每行一个JD）</label>
                            <textarea id="aiJobDescriptions" rows="5" placeholder="可以从招聘网站复制多个岗位描述，每行一个..." style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-family: inherit;"></textarea>
                        </div>
                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-primary);">样本数量</label>
                            <input type="number" id="aiSampleSize" value="30" min="10" max="100" style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px;">
                        </div>
                        <button id="aiGenerateJobBtn" class="btn-primary" style="width: 100%;">开始生成</button>
                        <div id="aiGenerateStatus" class="generate-status" style="margin-top: 16px;"></div>
                        <div id="aiGenerateResult" class="generate-result" style="margin-top: 16px;"></div>
                    </div>
                </div>

                <!-- 岗位详情（隐藏，点击列表项时显示） -->
                <div id="jobProfileDetail" class="job-profile-detail hidden"></div>
            </div>
        </div>

        <!-- 能力画像页面（独立模块） -->
        <div id="abilityProfilePage" class="page hidden">
            <div class="matching-container">
                <h2>能力画像</h2>
                <p style="color: var(--text-secondary); margin-bottom: 24px;">查看你的就业能力画像与多维度评分，为岗位匹配提供依据</p>
                
                <div class="ability-profile-actions" style="margin-bottom: 24px;">
                    <button id="generateAbilityProfileBtn" class="btn-primary">🤖 生成能力画像</button>
                    <button id="refreshAbilityProfileBtn" class="btn-secondary">🔄 刷新画像</button>
                </div>
                
                <div id="abilityProfileContent" class="ability-profile-content">
                    <div class="loading-message">加载能力画像中...</div>
                </div>
            </div>
        </div>

        <!-- 岗位匹配页面 -->
        <div id="matchingPage" class="page hidden">
            <div class="matching-container">
                <h2>岗位匹配</h2>
                <p style="color: var(--text-secondary); margin-bottom: 24px;">基于能力画像的智能岗位推荐与人岗匹配分析</p>
                
                <div class="matching-tabs">
                    <button class="tab-btn active" data-tab="recommend">🎯 推荐岗位</button>
                    <button class="tab-btn" data-tab="search">🔍 搜索岗位</button>
                    <button class="tab-btn" data-tab="analysis">📋 匹配分析</button>
                </div>

                <!-- 推荐岗位 -->
                <div class="tab-content active" id="recommendTab">
                    <div id="recommendedJobs" class="jobs-grid">
                        <div class="loading-message">加载推荐岗位中...</div>
                    </div>
                </div>

                <!-- 搜索岗位 -->
                <div class="tab-content" id="searchTab">
                    <div class="search-section">
                        <input type="text" id="jobSearchInput" placeholder="搜索岗位名称...">
                        <button id="searchJobBtn" class="btn-primary">搜索</button>
                    </div>
                    <div id="searchResults" class="jobs-grid">
                        <p class="hint-text">请输入岗位名称进行搜索</p>
                    </div>
                </div>

                <!-- 匹配分析 -->
                <div class="tab-content" id="analysisTab">
                    <div class="analysis-section">
                        <select id="jobSelect" class="job-select">
                            <option value="" disabled selected class="placeholder-option">选择一个岗位进行分析</option>
                        </select>
                        <button id="analyzeBtn" class="btn-primary">开始分析</button>
                    </div>
                    <div id="analysisResult" class="analysis-result">
                        <p class="hint-text">选择岗位后点击「开始分析」查看人岗匹配详情</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 职业规划报告页面 -->
        <div id="reportPage" class="page hidden report-page">
            <div class="report-title-bar">
                <h2>职业规划报告</h2>
            </div>
            <div class="report-container">
                <div class="report-page-header">
                    <p class="report-page-desc">AI 为您生成个性化职业生涯发展规划，含岗位匹配、目标设定、行动计划与动态调整机制</p>
                </div>

                <!-- 生成报告入口区 -->
                <div id="reportGenerateArea" class="report-generate-area">
                    <div class="report-generate-card">
                        <div class="report-generate-icon">📋</div>
                        <h3>生成职业规划报告</h3>
                        <p>基于测评结果、能力画像与人岗匹配，AI 将为您生成专属职业发展规划</p>
                        <button id="generateReportBtn" class="btn-generate-report">生成新报告</button>
                        <button id="viewHistoryBtn" class="btn-view-history">查看历史报告</button>
                    </div>

                    <!-- 生成偏好表单（展开显示） -->
                    <div id="reportPreferencesForm" class="report-preferences-form hidden">
                        <h4>生成偏好（可选）</h4>
                        <div class="preferences-grid">
                            <div class="form-group">
                                <label>职业目标类型</label>
                                <select id="prefCareerGoal">
                                    <option value="">不限制</option>
                                    <option value="技术专家">技术专家</option>
                                    <option value="管理岗位">管理岗位</option>
                                    <option value="创业">创业</option>
                                    <option value="专业深耕">专业深耕</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>期望工作地点</label>
                                <input type="text" id="prefWorkLocation" placeholder="如：北京、上海、杭州">
                            </div>
                            <div class="form-group">
                                <label>薪资预期</label>
                                <select id="prefSalary">
                                    <option value="">不限制</option>
                                    <option value="10k-15k">10k-15k</option>
                                    <option value="15k-25k">15k-25k</option>
                                    <option value="25k+">25k+</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>工作生活平衡</label>
                                <select id="prefWorkLifeBalance">
                                    <option value="">不限制</option>
                                    <option value="高">高（重视生活）</option>
                                    <option value="中">中（平衡）</option>
                                    <option value="低">低（事业优先）</option>
                                </select>
                            </div>
                        </div>
                        <button id="confirmGenerateBtn" class="btn-primary">确认生成</button>
                    </div>
                </div>

                <!-- 生成中状态 -->
                <div id="reportGeneratingArea" class="report-generating-area hidden">
                    <div class="report-generating-card">
                        <div class="report-generating-spinner"></div>
                        <p>AI 正在生成您的职业规划报告，预计需要 30 秒</p>
                        <span class="report-generating-hint">请稍候，不要关闭页面</span>
                    </div>
                </div>

                <!-- 报告内容展示区 -->
                <div id="reportContentArea" class="report-content-area hidden">
                    <div class="report-toolbar">
                        <button id="reportCheckCompletenessBtn" class="btn-toolbar">完整性检查</button>
                        <button id="reportPolishBtn" class="btn-toolbar">AI 润色</button>
                        <button id="reportBackBtn" class="btn-toolbar">返回</button>
                    </div>
                    <div id="reportContent" class="report-content"></div>
                </div>

                <!-- 历史报告侧边/弹层 -->
                <div id="reportHistory" class="report-history-panel hidden">
                    <div class="report-history-header">
                        <h3>历史报告</h3>
                        <button id="closeHistoryBtn" class="btn-close-history">&times;</button>
                    </div>
                    <div id="historyList" class="report-history-list"></div>
                </div>
            </div>
        </div>

        <!-- 消息提示 -->
        <div id="toast" class="toast"></div>

        <!-- 档案详情模态框 -->
        <div id="profileModal" class="modal-overlay hidden">
            <div class="modal-content profile-modal">
                <div class="modal-header">
                    <h3>完整档案信息</h3>
                    <button class="modal-close" id="closeProfileModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="profileModalContent"></div>
                </div>
            </div>
        </div>

        <!-- 快速注册模态框 -->
        <div id="quickRegisterModal" class="modal-overlay hidden">
            <div class="quick-register-modal">
                <div class="quick-register-header">
                    <div class="quick-register-icon">
                        <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="24" cy="24" r="24" fill="url(#gradient1)"/>
                            <defs>
                                <linearGradient id="gradient1" x1="0" y1="0" x2="48" y2="48">
                                    <stop offset="0%" stop-color="#2563eb"/>
                                    <stop offset="100%" stop-color="#4f46e5"/>
                                </linearGradient>
                            </defs>
                            <path d="M24 16L28 22L32 16" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M24 24L28 30L32 24" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M24 32L28 38L32 32" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h2>用一句话介绍自己</h2>
                    <p class="quick-register-subtitle">AI 将根据您的描述，为您生成专属账号</p>
                    <button class="quick-register-close" id="closeQuickRegisterModal">&times;</button>
                </div>
                
                <div class="quick-register-body">
                    <div class="quick-register-examples">
                        <span class="example-label">💡 示例：</span>
                        <div class="example-tags">
                            <span class="example-tag">我是大三学生，想找前端开发工作</span>
                            <span class="example-tag">转行做产品经理，需要职业规划</span>
                            <span class="example-tag">设计专业毕业，寻找UI设计岗位</span>
                        </div>
                    </div>
                    
                    <div class="quick-register-input-wrapper">
                        <textarea 
                            id="quickRegisterText" 
                            class="quick-register-textarea" 
                            placeholder="例如：我是计算机专业大三学生，对前端开发很感兴趣，希望找到合适的实习机会..."
                            rows="4"
                        ></textarea>
                        <div class="quick-register-counter">
                            <span id="quickRegisterCharCount">0</span> / 200
                        </div>
                    </div>
                    
                    <div class="quick-register-features">
                        <div class="quick-feature-item">
                            <span class="quick-feature-icon">✨</span>
                            <span class="quick-feature-text">智能生成账号</span>
                        </div>
                        <div class="quick-feature-item">
                            <span class="quick-feature-icon">🚀</span>
                            <span class="quick-feature-text">快速开始规划</span>
                        </div>
                        <div class="quick-feature-item">
                            <span class="quick-feature-icon">🎯</span>
                            <span class="quick-feature-text">个性化推荐</span>
                        </div>
                    </div>
                </div>
                
                <div class="quick-register-footer">
                    <button type="button" id="handleQuickRegisterBtn" class="quick-register-submit-btn">
                        <span class="btn-text">开始我的职业规划</span>
                        <span class="btn-arrow">→</span>
                    </button>
                    <p class="quick-register-hint">点击即表示同意我们的服务条款</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="api.js?v=9&t=20260221"></script>
    <script src="app.js?v=9&t=20260221"></script>
    <link rel="stylesheet" href="styles.css?v=8&t=20240219">
    
    <!-- 粒子效果脚本 -->
    <script>
        // 粒子效果
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('particles');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // 粒子数组
            const particles = [];
            const particleCount = 40;
            
            // 创建粒子
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: -Math.random() * 0.5 - 0.2,
                    size: Math.random() * 2 + 1,
                    alpha: Math.random() * 0.5 + 0.3,
                    pulse: Math.random() * Math.PI * 2
                });
            }
            
            // 动画循环
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // 更新和绘制粒子
                particles.forEach((p, i) => {
                    // 更新位置
                    p.x += p.vx;
                    p.y += p.vy;
                    
                    // 边界检测
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0) {
                        p.y = canvas.height;
                    }
                    
                    // 脉冲效果
                    p.pulse += 0.03;
                    p.alpha = 0.3 + Math.sin(p.pulse) * 0.2;
                    
                    // 绘制粒子
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(37, 99, 235, ${p.alpha})`;
                    ctx.fill();
                    
                    // 绘制粒子间连线
                    particles.forEach((otherP, j) => {
                        if (i !== j) {
                            const dx = p.x - otherP.x;
                            const dy = p.y - otherP.y;
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            
                            if (distance < 120) {
                                const lineAlpha = (1 - distance / 120) * 0.2;
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(otherP.x, otherP.y);
                                ctx.strokeStyle = `rgba(37, 99, 235, ${lineAlpha})`;
                                ctx.lineWidth = 0.5;
                                ctx.stroke();
                            }
                        }
                    });
                });
                
                requestAnimationFrame(animate);
            }
            
            // 启动动画
            animate();
            
            // 窗口大小调整
            window.addEventListener('resize', function() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        });
    </script>
</body>
</html>
