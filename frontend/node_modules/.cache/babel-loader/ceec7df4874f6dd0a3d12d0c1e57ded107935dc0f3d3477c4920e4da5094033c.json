{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\n// src/eventbus/index.ts\nfunction EventBus() {\n  const allHandlers = /* @__PURE__ */new Map();\n  return {\n    on(type, handler) {\n      let handlers = allHandlers.get(type);\n      if (!handlers) handlers = [handler];else handlers.push(handler);\n      allHandlers.set(type, handlers);\n      return this;\n    },\n    off(type, handler) {\n      const handlers = allHandlers.get(type);\n      if (handlers) {\n        handlers.splice(handlers.indexOf(handler) >>> 0, 1);\n      }\n      return this;\n    },\n    emit(type, evt) {\n      const handlers = allHandlers.get(type);\n      if (handlers) {\n        handlers.forEach(handler => {\n          handler(evt);\n        });\n      }\n    },\n    clear() {\n      allHandlers.clear();\n    }\n  };\n}\nexport { EventBus };","map":{"version":3,"names":["EventBus","allHandlers","Map","on","type","handler","handlers","get","push","set","off","splice","indexOf","emit","evt","forEach","clear"],"sources":["../../src/eventbus/index.ts"],"sourcesContent":["export type Handler = (evt: unknown) => void;\n\nexport interface EventBusOptions {\n    on(type: string, handler: Handler): void;\n    off(type: string, handler: Handler): void;\n    emit(type: string, evt?: unknown): void;\n    clear(): void;\n}\n\nexport function EventBus(): EventBusOptions {\n    const allHandlers = new Map<string, Handler[]>();\n\n    return {\n        on(type: string, handler: Handler) {\n            let handlers = allHandlers.get(type);\n\n            if (!handlers) handlers = [handler];\n            else handlers.push(handler);\n\n            allHandlers.set(type, handlers);\n\n            return this;\n        },\n        off(type: string, handler: Handler) {\n            const handlers = allHandlers.get(type);\n\n            if (handlers) {\n                handlers.splice(handlers.indexOf(handler) >>> 0, 1);\n            }\n\n            return this;\n        },\n        emit(type: string, evt?: unknown) {\n            const handlers = allHandlers.get(type);\n\n            if (handlers) {\n                handlers.forEach((handler) => {\n                    handler(evt);\n                });\n            }\n        },\n        clear() {\n            allHandlers.clear();\n        }\n    };\n}\n"],"mappings":";;;;AASO,SAASA,SAAA,EAA4B;EACxC,MAAMC,WAAA,GAAc,mBAAIC,GAAA,CAAuB;EAE/C,OAAO;IACHC,GAAGC,IAAA,EAAcC,OAAA,EAAkB;MAC/B,IAAIC,QAAA,GAAWL,WAAA,CAAYM,GAAA,CAAIH,IAAI;MAEnC,IAAI,CAACE,QAAA,EAAUA,QAAA,GAAW,CAACD,OAAO,OAC7BC,QAAA,CAASE,IAAA,CAAKH,OAAO;MAE1BJ,WAAA,CAAYQ,GAAA,CAAIL,IAAA,EAAME,QAAQ;MAE9B,OAAO;IACX;IACAI,IAAIN,IAAA,EAAcC,OAAA,EAAkB;MAChC,MAAMC,QAAA,GAAWL,WAAA,CAAYM,GAAA,CAAIH,IAAI;MAErC,IAAIE,QAAA,EAAU;QACVA,QAAA,CAASK,MAAA,CAAOL,QAAA,CAASM,OAAA,CAAQP,OAAO,MAAM,GAAG,CAAC;MACtD;MAEA,OAAO;IACX;IACAQ,KAAKT,IAAA,EAAcU,GAAA,EAAe;MAC9B,MAAMR,QAAA,GAAWL,WAAA,CAAYM,GAAA,CAAIH,IAAI;MAErC,IAAIE,QAAA,EAAU;QACVA,QAAA,CAASS,OAAA,CAASV,OAAA,IAAY;UAC1BA,OAAA,CAAQS,GAAG;QACf,CAAC;MACL;IACJ;IACAE,MAAA,EAAQ;MACJf,WAAA,CAAYe,KAAA,CAAM;IACtB;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}